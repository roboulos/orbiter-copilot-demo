module.exports=[88210,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toAnthropicAIMessages=void 0,r.toAnthropicAIMessages=e=>{let t=[];for(let r of e)r.message&&("user"===r.role?t.push({role:r.role,content:r.message}):"assistant"===r.role&&t.push({role:r.role,content:JSON.stringify({response:r.message})}));return t}},7304,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=r.enableErrorLogging=r.disableErrorLogging=r.setErrorLogger=void 0;let s=console.error;function a(e){if(void 0!==e){if(null===e)return null;if(""===e)return"";e=e.replace(/\\+$/,e=>e.length%2==0?e:e.slice(0,-1));try{return JSON.parse(e)}catch(s){let[t,r]=":"===e.trimLeft()[0]?n(e,s):n(e,s,f);if(a.lastParseReminding=r,a.onExtraToken&&r.length>0){let s=r.trimRight();a.lastParseReminding=s,s.length>0&&a.onExtraToken(e,t,s)}return t}}}function n(e,t,r){let a=i[e[0]]||r;if(!a)throw s(`no parser registered for ${JSON.stringify(e[0])}:`,{s:e}),t;return a(e,t)}r.setErrorLogger=function(e){s=e},r.disableErrorLogging=function(){s=()=>{}},r.enableErrorLogging=function(){s=console.error},r.parse=a,(a=r.parse||(r.parse={})).onExtraToken=(e,t,r)=>{s("parsed json with extra tokens:",{text:e,data:t,reminding:r})};let i={};function o(e){return e.trimLeft()}function l(e,t){return n(e=o(e),t)}for(let e of(i[" "]=l,i["\r"]=l,i["\n"]=l,i["	"]=l,i["["]=function(e,t){e=e.substr(1);let r=[];for(e=o(e);e.length>0;){if("]"===e[0]){e=e.substr(1);break}let s=n(e,t,(e,t)=>f(e,t,[",","]"]));r.push(s[0]),","===(e=o(e=s[1]))[0]&&(e=o(e=e.substring(1)))}return[r,e]},"0123456789.-".slice()))i[e]=d;function d(e){for(let t=0;t<e.length;t++){if(i[e[t]]===d)continue;let r=e.substring(0,t);return e=e.substring(t),[u(r),e]}return[u(e),""]}function u(e){if("-"===e)return -0;let t=+e;return Number.isNaN(t)?e:t}function c(e){for(let t=1;t<e.length;t++){let r=e[t];if("\\"===r){t++;continue}if('"'===r){let r=p(e.substring(0,t+1));return e=e.substring(t+1),[JSON.parse(r),e]}}return[JSON.parse(p(e)+'"'),""]}function p(e){return e.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}function h(e){for(let t=1;t<e.length;t++){let r=e[t];if("\\"===r){t++;continue}if("'"===r){let r=p(e.substring(0,t+1));return e=e.substring(t+1),[JSON.parse('"'+r.slice(1,-1)+'"'),e]}}return[JSON.parse('"'+p(e.slice(1))+'"'),""]}function f(e,t,r=[" "]){let s=Math.min(...r.map(t=>{let r=e.indexOf(t);return -1===r?e.length:r}));return[e.substring(0,s).trim(),e.substring(s)]}function m(e,t,r,a){for(let s=t.length;s>=1;s--)if(e.startsWith(t.slice(0,s)))return[r,e.slice(s)];{let r=JSON.stringify(e.slice(0,t.length));throw s(`unknown token starting with ${r}:`,{s:e}),a}}i['"']=c,i["'"]=h,i["{"]=function(e,t){e=e.substr(1);let r={};for(e=o(e);e.length>0;){var s,a;if("}"===e[0]){e=e.substr(1);break}let i=(a=[":","}"],'"'===(s=e)[0]?c(s):"'"===s[0]?h(s):f(s,t,a)),l=i[0];if(":"!==(e=o(e=i[1]))[0]||0===(e=o(e=e.substr(1))).length){r[l]=void 0;break}let d=n(e,t);r[l]=d[0],","===(e=o(e=d[1]))[0]&&(e=o(e=e.substr(1)))}return[r,e]},i.t=function(e,t){return m(e,"true",!0,t)},i.f=function(e,t){return m(e,"false",!1,t)},i.n=function(e,t){return m(e,"null",null,t)}},73083,(e,t,r)=>{"use strict";t.exports=function(e,t){if(!e)throw Error("Invariant failed")}},82741,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=/(\r\n|\r|\n)/g;function a(e){let t=`${e}`.replace(s,`
`).split(/\n/),r="",a="";for(let e=0,s=t.length;e<s;++e)r=t[e],a+=`data: ${r}`+(e+1===s?`

`:`
`);return a}function n(e){return`: ${e.replace(s,`
: `)}

`}r.encode=function(e){var t;let r;return"comment"in e?n(e.comment):(r="",(t=e).event&&(r+=`event: ${t.event}
`),"number"==typeof t.retry&&Number.isFinite(t.retry)&&(r+=`retry: ${t.retry}
`),("string"==typeof t.id||"number"==typeof t.id)&&(r+=`id: ${t.id}
`),"string"==typeof t.data?r+=a(t.data):r&&(r+=`

`),r)},r.encodeComment=n,r.encodeData=a},16331,(e,t,r)=>{"use strict";var s,a,n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Error=r.MessageUpdate=r.ContextUpdate=r.ResponseTemplatePropsChunk=r.ResponseTemplate=r.TextChunk=r.SSEType=void 0;let i=e.r(82741),o=n(e.r(73083));(s=a||(r.SSEType=a={})).TextDelta="text",s.ResponseTemplate="tpl",s.ResponseTemplatePropsChunk="tpl_props_chunk",s.ContextAppend="context_append",s.MessageUpdate="message_update",s.Error="error";class l{constructor(e){this.chunk=e}toSSEString(){return(0,i.encode)({event:a.TextDelta,data:this.chunk})}static fromSSEData(e){return new l(e)}}r.TextChunk=l;class d{constructor(e,t){this.name=e,this.templateProps=t}toSSEString(){return(0,i.encode)({event:a.ResponseTemplate,data:JSON.stringify({name:this.name,templateProps:this.templateProps})})}static fromSSEData(e){let{name:t,templateProps:r}=JSON.parse(e);return(0,o.default)(t,"name is required in ResponseTemplate"),new d(t,r)}}r.ResponseTemplate=d;class u{constructor(e){this.chunk=e}toSSEString(){return(0,i.encode)({event:a.ResponseTemplatePropsChunk,data:this.chunk})}static fromSSEData(e){return new u(e)}}r.ResponseTemplatePropsChunk=u;class c{constructor(e){this.contextItem=e}toSSEString(){return(0,i.encode)({event:a.ContextAppend,data:JSON.stringify(this.contextItem)})}static fromSSEData(e){return new c(JSON.parse(e))}}r.ContextUpdate=c;class p{constructor(e){this.id=e}toSSEString(){return(0,i.encode)({event:a.MessageUpdate,data:JSON.stringify({id:this.id})})}static fromSSEData(e){let{id:t}=JSON.parse(e);return(0,o.default)(t,"id is required in MessageUpdate"),new p(t)}}r.MessageUpdate=p;class h{constructor(e){this.error=e}toSSEString(){return(0,i.encode)({event:a.Error,data:this.error})}static fromSSEData(e){return new h(e)}}r.Error=h},60068,(e,t,r)=>{"use strict";var s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.CrayonDataStreamTransformer=void 0;let a=e.r(7304),n=s(e.r(73083)),i=e.r(16331);r.CrayonDataStreamTransformer=class{reset(){let e=(0,a.parse)(this.streamedContent),t=e?.response?.pop?.();if(this.hasPendingTemplateToStream&&t&&"text"!==t.type){let{name:e,templateProps:r}=t;(0,n.default)(e,"name is required in ResponseTemplate"),this.controller?.enqueue(new i.ResponseTemplate(e,r).toSSEString())}this.hasPendingTemplateToStream=!1,this.streamedContent=""}constructor(e){this.streamedContent="",this.controller=null,this.hasPendingTemplateToStream=!1,this.hasPendingTemplateToStream=!1,this.streamedContent="";let t="";const r=new TransformStream({transform:async(e,r)=>{this.controller=r;try{this.streamedContent+=e;let s=(0,a.parse)(this.streamedContent),o=s?.response?.pop?.();if(o?.type==="text"){let e=s.response.pop(),a=o.text||"";if(this.hasPendingTemplateToStream&&e&&e?.type!=="text"){let{name:t,templateProps:s}=e;(0,n.default)(t,"name is required in ResponseTemplate"),r.enqueue(new i.ResponseTemplate(t,s).toSSEString()),this.hasPendingTemplateToStream=!1}let l=a.substring(t.length);l.length>0&&r.enqueue(new i.TextChunk(l).toSSEString()),t=a}else this.hasPendingTemplateToStream=!0,t=""}catch(e){r.error(e)}},flush:async t=>{this.reset(),await e?.onFinish(t),this.controller=null}});this.readable=r.readable,this.writable=r.writable}}},45678,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crayonStream=void 0;let s=e.r(60068);r.crayonStream=e=>{let t=null,r=new ReadableStream({async start(e){t=e}}),a=new s.CrayonDataStreamTransformer(e);return{stream:r.pipeThrough(a),onText:e=>{t.enqueue(e)},onEnd:()=>{t.close()},onLLMEnd:()=>{a.reset()},onError:e=>{t.error(e)}}}},26448,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultOptions=r.defaultOptions=r.jsonDescription=r.ignoreOverride=void 0,r.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),r.jsonDescription=(e,t)=>{if(t.description)try{return{...e,...JSON.parse(t.description)}}catch{}return e},r.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},r.getDefaultOptions=e=>"string"==typeof e?{...r.defaultOptions,name:e}:{...r.defaultOptions,...e}},42126,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRefs=void 0;let s=e.r(26448);r.getRefs=e=>{let t=(0,s.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}}},78254,(e,t,r)=>{"use strict";function s(e,t,r,s){s?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}Object.defineProperty(r,"__esModule",{value:!0}),r.setResponseValueAndErrors=r.addErrorMessage=void 0,r.addErrorMessage=s,r.setResponseValueAndErrors=function(e,t,r,a,n){e[t]=r,s(e,t,a,n)}},67179,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRelativePath=void 0,r.getRelativePath=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")}},92524,(e,t,r)=>{"use strict";var s,a,n;Object.defineProperty(r,"__esModule",{value:!0}),r.getParsedType=r.ZodParsedType=r.objectUtil=r.util=void 0,(n=s||(r.util=s={})).assertEqual=e=>{},n.assertIs=function(e){},n.assertNever=function(e){throw Error()},n.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},n.getValidEnumValues=e=>{let t=n.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let s of t)r[s]=e[s];return n.objectValues(r)},n.objectValues=e=>n.objectKeys(e).map(function(t){return e[t]}),n.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},n.find=(e,t)=>{for(let r of e)if(t(r))return r},n.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,n.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},n.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(a||(r.objectUtil=a={})).mergeShapes=(e,t)=>({...e,...t}),r.ZodParsedType=s.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),r.getParsedType=e=>{switch(typeof e){case"undefined":return r.ZodParsedType.undefined;case"string":return r.ZodParsedType.string;case"number":return Number.isNaN(e)?r.ZodParsedType.nan:r.ZodParsedType.number;case"boolean":return r.ZodParsedType.boolean;case"function":return r.ZodParsedType.function;case"bigint":return r.ZodParsedType.bigint;case"symbol":return r.ZodParsedType.symbol;case"object":if(Array.isArray(e))return r.ZodParsedType.array;if(null===e)return r.ZodParsedType.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return r.ZodParsedType.promise;if("u">typeof Map&&e instanceof Map)return r.ZodParsedType.map;if("u">typeof Set&&e instanceof Set)return r.ZodParsedType.set;if("u">typeof Date&&e instanceof Date)return r.ZodParsedType.date;return r.ZodParsedType.object;default:return r.ZodParsedType.unknown}}},16016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ZodError=r.quotelessJson=r.ZodIssueCode=void 0;let s=e.r(92524);r.ZodIssueCode=s.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),r.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},s=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,s=0;for(;s<a.path.length;){let r=a.path[s];s===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(this),r}static assert(e){if(!(e instanceof a))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let s of this.issues)if(s.path.length>0){let r=s.path[0];t[r]=t[r]||[],t[r].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}r.ZodError=a,a.create=e=>new a(e)},92343,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let s=e.r(16016),a=e.r(92524);r.default=(e,t)=>{let r;switch(e.code){case s.ZodIssueCode.invalid_type:r=e.received===a.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case s.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,a.util.jsonStringifyReplacer)}`;break;case s.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${a.util.joinValues(e.keys,", ")}`;break;case s.ZodIssueCode.invalid_union:r="Invalid input";break;case s.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${a.util.joinValues(e.options)}`;break;case s.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${a.util.joinValues(e.options)}, received '${e.received}'`;break;case s.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case s.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case s.ZodIssueCode.invalid_date:r="Invalid date";break;case s.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:a.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case s.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case s.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case s.ZodIssueCode.custom:r="Invalid input";break;case s.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case s.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case s.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,a.util.assertNever(e)}return{message:r}}},40856,(e,t,r)=>{"use strict";var s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.defaultErrorMap=void 0,r.setErrorMap=function(e){n=e},r.getErrorMap=function(){return n};let a=s(e.r(92343));r.defaultErrorMap=a.default;let n=a.default},50442,(e,t,r)=>{"use strict";var s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isAsync=r.isValid=r.isDirty=r.isAborted=r.OK=r.DIRTY=r.INVALID=r.ParseStatus=r.EMPTY_PATH=r.makeIssue=void 0,r.addIssueToContext=function(e,t){let s=(0,a.getErrorMap)(),i=(0,r.makeIssue)({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===n.default?void 0:n.default].filter(e=>!!e)});e.common.issues.push(i)};let a=e.r(40856),n=s(e.r(92343));r.makeIssue=e=>{let{data:t,path:r,errorMaps:s,issueData:a}=e,n=[...r,...a.path||[]],i={...a,path:n};if(void 0!==a.message)return{...a,path:n,message:a.message};let o="";for(let e of s.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:n,message:o}},r.EMPTY_PATH=[];class i{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let a of t){if("aborted"===a.status)return r.INVALID;"dirty"===a.status&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,s=await e.value;r.push({key:t,value:s})}return i.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let s={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return r.INVALID;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(s[t.value]=n.value)}return{status:e.value,value:s}}}r.ParseStatus=i,r.INVALID=Object.freeze({status:"aborted"}),r.DIRTY=e=>({status:"dirty",value:e}),r.OK=e=>({status:"valid",value:e}),r.isAborted=e=>"aborted"===e.status,r.isDirty=e=>"dirty"===e.status,r.isValid=e=>"valid"===e.status,r.isAsync=e=>"u">typeof Promise&&e instanceof Promise},8416,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},35600,(e,t,r)=>{"use strict";var s,a;Object.defineProperty(r,"__esModule",{value:!0}),r.errorUtil=void 0,(a=s||(r.errorUtil=s={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},a.toString=e=>"string"==typeof e?e:e?.message},18726,(e,t,r)=>{"use strict";var s,a;let n;Object.defineProperty(r,"__esModule",{value:!0}),r.discriminatedUnion=r.date=r.boolean=r.bigint=r.array=r.any=r.coerce=r.ZodFirstPartyTypeKind=r.late=r.ZodSchema=r.Schema=r.ZodReadonly=r.ZodPipeline=r.ZodBranded=r.BRAND=r.ZodNaN=r.ZodCatch=r.ZodDefault=r.ZodNullable=r.ZodOptional=r.ZodTransformer=r.ZodEffects=r.ZodPromise=r.ZodNativeEnum=r.ZodEnum=r.ZodLiteral=r.ZodLazy=r.ZodFunction=r.ZodSet=r.ZodMap=r.ZodRecord=r.ZodTuple=r.ZodIntersection=r.ZodDiscriminatedUnion=r.ZodUnion=r.ZodObject=r.ZodArray=r.ZodVoid=r.ZodNever=r.ZodUnknown=r.ZodAny=r.ZodNull=r.ZodUndefined=r.ZodSymbol=r.ZodDate=r.ZodBoolean=r.ZodBigInt=r.ZodNumber=r.ZodString=r.ZodType=void 0,r.NEVER=r.void=r.unknown=r.union=r.undefined=r.tuple=r.transformer=r.symbol=r.string=r.strictObject=r.set=r.record=r.promise=r.preprocess=r.pipeline=r.ostring=r.optional=r.onumber=r.oboolean=r.object=r.number=r.nullable=r.null=r.never=r.nativeEnum=r.nan=r.map=r.literal=r.lazy=r.intersection=r.instanceof=r.function=r.enum=r.effect=void 0,r.datetimeRegex=R,r.custom=e_;let i=e.r(16016),o=e.r(40856),l=e.r(35600),d=e.r(50442),u=e.r(92524);class c{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let p=(e,t)=>{if((0,d.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new i.ZodError(e.common.issues);return this._error=t,this._error}}};function h(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{let{message:n}=e;return"invalid_enum_value"===t.code?{message:n??a.defaultError}:void 0===a.data?{message:n??s??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:n??r??a.defaultError}},description:a}}class f{get description(){return this._def.description}_getType(e){return(0,u.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,u.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new d.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,u.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if((0,d.isAsync)(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,u.getParsedType)(e)},s=this._parseSync({data:e,path:r.path,parent:r});return p(r,s)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,u.getParsedType)(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return(0,d.isValid)(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>(0,d.isValid)(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,u.getParsedType)(e)},s=this._parse({data:e,path:r.path,parent:r});return p(r,await ((0,d.isAsync)(s)?s:Promise.resolve(s)))}refine(e,t){return this._refinement((r,s)=>{let a=e(r),n=()=>s.addIssue({code:i.ZodIssueCode.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"u">typeof Promise&&a instanceof Promise?a.then(e=>!!e||(n(),!1)):!!a||(n(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new el({schema:this,typeName:s.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ed.create(this,this._def)}nullable(){return eu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return z.create(this)}promise(){return eo.create(this,this._def)}or(e){return B.create([this,e],this._def)}and(e){return X.create(this,e,this._def)}transform(e){return new el({...h(this._def),schema:this,typeName:s.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ec({...h(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:s.ZodDefault})}brand(){return new ef({typeName:s.ZodBranded,type:this,...h(this._def)})}catch(e){return new ep({...h(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:s.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return em.create(this,e)}readonly(){return ey.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}r.ZodType=f,r.Schema=f,r.ZodSchema=f;let m=/^c[^\s-]{8,}$/i,y=/^[0-9a-z]+$/,g=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v=/^[a-z0-9_-]{21}$/i,b=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,w=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,k=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,x=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,T=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,P=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,S=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Z=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,I=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,A="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",O=RegExp(`^${A}$`);function C(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function R(e){let t=`${A}T${C(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)}class E extends f{_parse(e){var t,r,s,a;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==u.ZodParsedType.string){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.string,received:t.parsedType}),d.INVALID}let l=new d.ParseStatus;for(let c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("max"===c.kind)e.data.length>c.value&&(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("length"===c.kind){let t=e.data.length>c.value,r=e.data.length<c.value;(t||r)&&(o=this._getOrReturnCtx(e,o),t?(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):r&&(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),l.dirty())}else if("email"===c.kind)k.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"email",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("emoji"===c.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"emoji",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("uuid"===c.kind)_.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"uuid",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("nanoid"===c.kind)v.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"nanoid",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("cuid"===c.kind)m.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"cuid",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("cuid2"===c.kind)y.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"cuid2",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("ulid"===c.kind)g.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"ulid",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty());else if("url"===c.kind)try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"url",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"regex",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),l.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.invalid_string,validation:{startsWith:c.value},message:c.message}),l.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.invalid_string,validation:{endsWith:c.value},message:c.message}),l.dirty()):"datetime"===c.kind?R(c).test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.invalid_string,validation:"datetime",message:c.message}),l.dirty()):"date"===c.kind?O.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.invalid_string,validation:"date",message:c.message}),l.dirty()):"time"===c.kind?RegExp(`^${C(c)}$`).test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{code:i.ZodIssueCode.invalid_string,validation:"time",message:c.message}),l.dirty()):"duration"===c.kind?w.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"duration",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty()):"ip"===c.kind?(t=e.data,!(("v4"===(r=c.version)||!r)&&x.test(t)||("v6"===r||!r)&&P.test(t))&&1&&(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"ip",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty())):"jwt"===c.kind?!function(e,t){if(!b.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));if("object"!=typeof a||null===a||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)return!1;return!0}catch{return!1}}(e.data,c.alg)&&(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"jwt",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty()):"cidr"===c.kind?(s=e.data,!(("v4"===(a=c.version)||!a)&&T.test(s)||("v6"===a||!a)&&S.test(s))&&1&&(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"cidr",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty())):"base64"===c.kind?Z.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"base64",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty()):"base64url"===c.kind?I.test(e.data)||(o=this._getOrReturnCtx(e,o),(0,d.addIssueToContext)(o,{validation:"base64url",code:i.ZodIssueCode.invalid_string,message:c.message}),l.dirty()):u.util.assertNever(c);return{status:l.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:i.ZodIssueCode.invalid_string,...l.errorUtil.errToObj(r)})}_addCheck(e){return new E({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...l.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...l.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...l.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...l.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...l.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...l.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...l.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...l.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...l.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...l.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...l.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...l.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...l.errorUtil.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...l.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...l.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...l.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...l.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...l.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...l.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...l.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...l.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...l.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...l.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,l.errorUtil.errToObj(e))}trim(){return new E({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new E({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new E({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodString=E,E.create=e=>new E({checks:[],typeName:s.ZodString,coerce:e?.coerce??!1,...h(e)});class N extends f{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==u.ZodParsedType.number){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.number,received:t.parsedType}),d.INVALID}let r=new d.ParseStatus;for(let s of this._def.checks)"int"===s.kind?u.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"multipleOf"===s.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=r>s?r:s;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.not_finite,message:s.message}),r.dirty()):u.util.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,l.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,l.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,l.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,l.errorUtil.toString(t))}setLimit(e,t,r,s){return new N({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:l.errorUtil.toString(s)}]})}_addCheck(e){return new N({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:l.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:l.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:l.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:l.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:l.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:l.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:l.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:l.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:l.errorUtil.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&u.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}r.ZodNumber=N,N.create=e=>new N({checks:[],typeName:s.ZodNumber,coerce:e?.coerce||!1,...h(e)});class j extends f{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==u.ZodParsedType.bigint)return this._getInvalidInput(e);let r=new d.ParseStatus;for(let s of this._def.checks)"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):u.util.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.bigint,received:t.parsedType}),d.INVALID}gte(e,t){return this.setLimit("min",e,!0,l.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,l.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,l.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,l.errorUtil.toString(t))}setLimit(e,t,r,s){return new j({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:l.errorUtil.toString(s)}]})}_addCheck(e){return new j({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:l.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:l.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:l.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:l.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:l.errorUtil.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodBigInt=j,j.create=e=>new j({checks:[],typeName:s.ZodBigInt,coerce:e?.coerce??!1,...h(e)});class M extends f{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==u.ZodParsedType.boolean){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.boolean,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}r.ZodBoolean=M,M.create=e=>new M({typeName:s.ZodBoolean,coerce:e?.coerce||!1,...h(e)});class D extends f{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==u.ZodParsedType.date){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.date,received:t.parsedType}),d.INVALID}if(Number.isNaN(e.data.getTime())){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_date}),d.INVALID}let r=new d.ParseStatus;for(let s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(t=this._getOrReturnCtx(e,t),(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):u.util.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:l.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:l.errorUtil.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}r.ZodDate=D,D.create=e=>new D({checks:[],coerce:e?.coerce||!1,typeName:s.ZodDate,...h(e)});class $ extends f{_parse(e){if(this._getType(e)!==u.ZodParsedType.symbol){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.symbol,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}r.ZodSymbol=$,$.create=e=>new $({typeName:s.ZodSymbol,...h(e)});class L extends f{_parse(e){if(this._getType(e)!==u.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.undefined,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}r.ZodUndefined=L,L.create=e=>new L({typeName:s.ZodUndefined,...h(e)});class U extends f{_parse(e){if(this._getType(e)!==u.ZodParsedType.null){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.null,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}r.ZodNull=U,U.create=e=>new U({typeName:s.ZodNull,...h(e)});class F extends f{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,d.OK)(e.data)}}r.ZodAny=F,F.create=e=>new F({typeName:s.ZodAny,...h(e)});class V extends f{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,d.OK)(e.data)}}r.ZodUnknown=V,V.create=e=>new V({typeName:s.ZodUnknown,...h(e)});class q extends f{_parse(e){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.never,received:t.parsedType}),d.INVALID}}r.ZodNever=q,q.create=e=>new q({typeName:s.ZodNever,...h(e)});class K extends f{_parse(e){if(this._getType(e)!==u.ZodParsedType.undefined){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.void,received:t.parsedType}),d.INVALID}return(0,d.OK)(e.data)}}r.ZodVoid=K,K.create=e=>new K({typeName:s.ZodVoid,...h(e)});class z extends f{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==u.ZodParsedType.array)return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.array,received:t.parsedType}),d.INVALID;if(null!==s.exactLength){let e=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(e||a)&&((0,d.addIssueToContext)(t,{code:e?i.ZodIssueCode.too_big:i.ZodIssueCode.too_small,minimum:a?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&((0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&((0,d.addIssueToContext)(t,{code:i.ZodIssueCode.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>s.type._parseAsync(new c(t,e,t.path,r)))).then(e=>d.ParseStatus.mergeArray(r,e));let a=[...t.data].map((e,r)=>s.type._parseSync(new c(t,e,t.path,r)));return d.ParseStatus.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new z({...this._def,minLength:{value:e,message:l.errorUtil.toString(t)}})}max(e,t){return new z({...this._def,maxLength:{value:e,message:l.errorUtil.toString(t)}})}length(e,t){return new z({...this._def,exactLength:{value:e,message:l.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}r.ZodArray=z,z.create=(e,t)=>new z({type:e,minLength:null,maxLength:null,exactLength:null,typeName:s.ZodArray,...h(t)});class W extends f{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=u.util.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==u.ZodParsedType.object){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.object,received:t.parsedType}),d.INVALID}let{status:t,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),n=[];if(!(this._def.catchall instanceof q&&"strip"===this._def.unknownKeys))for(let e in r.data)a.includes(e)||n.push(e);let o=[];for(let e of a){let t=s[e],a=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new c(r,a,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof q){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of n)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)n.length>0&&((0,d.addIssueToContext)(r,{code:i.ZodIssueCode.unrecognized_keys,keys:n}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of n){let s=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new c(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of o){let r=await t.key,s=await t.value;e.push({key:r,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>d.ParseStatus.mergeObjectSync(t,e)):d.ParseStatus.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return l.errorUtil.errToObj,new W({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let s=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:l.errorUtil.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new W({...this._def,unknownKeys:"strip"})}passthrough(){return new W({...this._def,unknownKeys:"passthrough"})}extend(e){return new W({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new W({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:s.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new W({...this._def,catchall:e})}pick(e){let t={};for(let r of u.util.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new W({...this._def,shape:()=>t})}omit(e){let t={};for(let r of u.util.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new W({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof W){let r={};for(let s in t.shape){let a=t.shape[s];r[s]=ed.create(e(a))}return new W({...t._def,shape:()=>r})}if(t instanceof z)return new z({...t._def,type:e(t.element)});if(t instanceof ed)return ed.create(e(t.unwrap()));if(t instanceof eu)return eu.create(e(t.unwrap()));if(t instanceof Y)return Y.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of u.util.objectKeys(this.shape)){let s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new W({...this._def,shape:()=>t})}required(e){let t={};for(let r of u.util.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ed;)e=e._def.innerType;t[r]=e}return new W({...this._def,shape:()=>t})}keyof(){return ea(u.util.objectKeys(this.shape))}}r.ZodObject=W,W.create=(e,t)=>new W({shape:()=>e,unknownKeys:"strip",catchall:q.create(),typeName:s.ZodObject,...h(t)}),W.strictCreate=(e,t)=>new W({shape:()=>e,unknownKeys:"strict",catchall:q.create(),typeName:s.ZodObject,...h(t)}),W.lazycreate=(e,t)=>new W({shape:e,unknownKeys:"strip",catchall:q.create(),typeName:s.ZodObject,...h(t)});class B extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new i.ZodError(e.ctx.common.issues));return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_union,unionErrors:r}),d.INVALID});{let e,s=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},n=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:r}),r.common.issues.length&&s.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=s.map(e=>new i.ZodError(e));return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_union,unionErrors:a}),d.INVALID}}get options(){return this._def.options}}r.ZodUnion=B,B.create=(e,t)=>new B({options:e,typeName:s.ZodUnion,...h(t)});let J=e=>{if(e instanceof er)return J(e.schema);if(e instanceof el)return J(e.innerType());if(e instanceof es)return[e.value];if(e instanceof en)return e.options;if(e instanceof ei)return u.util.objectValues(e.enum);else if(e instanceof ec)return J(e._def.innerType);else if(e instanceof L)return[void 0];else if(e instanceof U)return[null];else if(e instanceof ed)return[void 0,...J(e.unwrap())];else if(e instanceof eu)return[null,...J(e.unwrap())];else if(e instanceof ef)return J(e.unwrap());else if(e instanceof ey)return J(e.unwrap());else if(e instanceof ep)return J(e._def.innerType);else return[]};class H extends f{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.ZodParsedType.object)return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.object,received:t.parsedType}),d.INVALID;let r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):((0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),d.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=J(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of t){if(a.has(s))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);a.set(s,r)}}return new H({typeName:s.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...h(r)})}}r.ZodDiscriminatedUnion=H;class X extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),s=(e,s)=>{if((0,d.isAborted)(e)||(0,d.isAborted)(s))return d.INVALID;let a=function e(t,r){let s=(0,u.getParsedType)(t),a=(0,u.getParsedType)(r);if(t===r)return{valid:!0,data:t};if(s===u.ZodParsedType.object&&a===u.ZodParsedType.object){let s=u.util.objectKeys(r),a=u.util.objectKeys(t).filter(e=>-1!==s.indexOf(e)),n={...t,...r};for(let s of a){let a=e(t[s],r[s]);if(!a.valid)return{valid:!1};n[s]=a.data}return{valid:!0,data:n}}if(s===u.ZodParsedType.array&&a===u.ZodParsedType.array){if(t.length!==r.length)return{valid:!1};let s=[];for(let a=0;a<t.length;a++){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};s.push(n.data)}return{valid:!0,data:s}}if(s===u.ZodParsedType.date&&a===u.ZodParsedType.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,s.value);return a.valid?(((0,d.isDirty)(e)||(0,d.isDirty)(s))&&t.dirty(),{status:t.value,value:a.data}):((0,d.addIssueToContext)(r,{code:i.ZodIssueCode.invalid_intersection_types}),d.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}r.ZodIntersection=X,X.create=(e,t,r)=>new X({left:e,right:t,typeName:s.ZodIntersection,...h(r)});class Y extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.array)return(0,d.addIssueToContext)(r,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.array,received:r.parsedType}),d.INVALID;if(r.data.length<this._def.items.length)return(0,d.addIssueToContext)(r,{code:i.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),d.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,d.addIssueToContext)(r,{code:i.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let s=[...r.data].map((e,t)=>{let s=this._def.items[t]||this._def.rest;return s?s._parse(new c(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(s).then(e=>d.ParseStatus.mergeArray(t,e)):d.ParseStatus.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Y({...this._def,rest:e})}}r.ZodTuple=Y,Y.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Y({items:e,typeName:s.ZodTuple,rest:null,...h(t)})};class G extends f{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.object)return(0,d.addIssueToContext)(r,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.object,received:r.parsedType}),d.INVALID;let s=[],a=this._def.keyType,n=this._def.valueType;for(let e in r.data)s.push({key:a._parse(new c(r,e,r.path,e)),value:n._parse(new c(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?d.ParseStatus.mergeObjectAsync(t,s):d.ParseStatus.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return new G(t instanceof f?{keyType:e,valueType:t,typeName:s.ZodRecord,...h(r)}:{keyType:E.create(),valueType:e,typeName:s.ZodRecord,...h(t)})}}r.ZodRecord=G;class Q extends f{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.map)return(0,d.addIssueToContext)(r,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.map,received:r.parsedType}),d.INVALID;let s=this._def.keyType,a=this._def.valueType,n=[...r.data.entries()].map(([e,t],n)=>({key:s._parse(new c(r,e,r.path,[n,"key"])),value:a._parse(new c(r,t,r.path,[n,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of n){let s=await r.key,a=await r.value;if("aborted"===s.status||"aborted"===a.status)return d.INVALID;("dirty"===s.status||"dirty"===a.status)&&t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of n){let s=r.key,a=r.value;if("aborted"===s.status||"aborted"===a.status)return d.INVALID;("dirty"===s.status||"dirty"===a.status)&&t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}r.ZodMap=Q,Q.create=(e,t,r)=>new Q({valueType:t,keyType:e,typeName:s.ZodMap,...h(r)});class ee extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==u.ZodParsedType.set)return(0,d.addIssueToContext)(r,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.set,received:r.parsedType}),d.INVALID;let s=this._def;null!==s.minSize&&r.data.size<s.minSize.value&&((0,d.addIssueToContext)(r,{code:i.ZodIssueCode.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&r.data.size>s.maxSize.value&&((0,d.addIssueToContext)(r,{code:i.ZodIssueCode.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let a=this._def.valueType;function n(e){let r=new Set;for(let s of e){if("aborted"===s.status)return d.INVALID;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}let o=[...r.data.values()].map((e,t)=>a._parse(new c(r,e,r.path,t)));return r.common.async?Promise.all(o).then(e=>n(e)):n(o)}min(e,t){return new ee({...this._def,minSize:{value:e,message:l.errorUtil.toString(t)}})}max(e,t){return new ee({...this._def,maxSize:{value:e,message:l.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}r.ZodSet=ee,ee.create=(e,t)=>new ee({valueType:e,minSize:null,maxSize:null,typeName:s.ZodSet,...h(t)});class et extends f{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.ZodParsedType.function)return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.function,received:t.parsedType}),d.INVALID;function r(e,r){return(0,d.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter(e=>!!e),issueData:{code:i.ZodIssueCode.invalid_arguments,argumentsError:r}})}function s(e,r){return(0,d.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter(e=>!!e),issueData:{code:i.ZodIssueCode.invalid_return_type,returnTypeError:r}})}let a={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof eo){let e=this;return(0,d.OK)(async function(...t){let o=new i.ZodError([]),l=await e._def.args.parseAsync(t,a).catch(e=>{throw o.addIssue(r(t,e)),o}),d=await Reflect.apply(n,this,l);return await e._def.returns._def.type.parseAsync(d,a).catch(e=>{throw o.addIssue(s(d,e)),o})})}{let e=this;return(0,d.OK)(function(...t){let o=e._def.args.safeParse(t,a);if(!o.success)throw new i.ZodError([r(t,o.error)]);let l=Reflect.apply(n,this,o.data),d=e._def.returns.safeParse(l,a);if(!d.success)throw new i.ZodError([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new et({...this._def,args:Y.create(e).rest(V.create())})}returns(e){return new et({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new et({args:e||Y.create([]).rest(V.create()),returns:t||V.create(),typeName:s.ZodFunction,...h(r)})}}r.ZodFunction=et;class er extends f{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}r.ZodLazy=er,er.create=(e,t)=>new er({getter:e,typeName:s.ZodLazy,...h(t)});class es extends f{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{received:t.data,code:i.ZodIssueCode.invalid_literal,expected:this._def.value}),d.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ea(e,t){return new en({values:e,typeName:s.ZodEnum,...h(t)})}r.ZodLiteral=es,es.create=(e,t)=>new es({value:e,typeName:s.ZodLiteral,...h(t)});class en extends f{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,d.addIssueToContext)(t,{expected:u.util.joinValues(r),received:t.parsedType,code:i.ZodIssueCode.invalid_type}),d.INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return(0,d.addIssueToContext)(t,{received:t.data,code:i.ZodIssueCode.invalid_enum_value,options:r}),d.INVALID}return(0,d.OK)(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return en.create(e,{...this._def,...t})}exclude(e,t=this._def){return en.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}r.ZodEnum=en,en.create=ea;class ei extends f{_parse(e){let t=u.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==u.ZodParsedType.string&&r.parsedType!==u.ZodParsedType.number){let e=u.util.objectValues(t);return(0,d.addIssueToContext)(r,{expected:u.util.joinValues(e),received:r.parsedType,code:i.ZodIssueCode.invalid_type}),d.INVALID}if(this._cache||(this._cache=new Set(u.util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=u.util.objectValues(t);return(0,d.addIssueToContext)(r,{received:r.data,code:i.ZodIssueCode.invalid_enum_value,options:e}),d.INVALID}return(0,d.OK)(e.data)}get enum(){return this._def.values}}r.ZodNativeEnum=ei,ei.create=(e,t)=>new ei({values:e,typeName:s.ZodNativeEnum,...h(t)});class eo extends f{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.ZodParsedType.promise&&!1===t.common.async)return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.promise,received:t.parsedType}),d.INVALID;let r=t.parsedType===u.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,d.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}r.ZodPromise=eo,eo.create=(e,t)=>new eo({type:e,typeName:s.ZodPromise,...h(t)});class el extends f{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===s.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:e=>{(0,d.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===s.type){let e=s.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return d.INVALID;let s=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===s.status?d.INVALID:"dirty"===s.status||"dirty"===t.value?(0,d.DIRTY)(s.value):s});{if("aborted"===t.value)return d.INVALID;let s=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===s.status?d.INVALID:"dirty"===s.status||"dirty"===t.value?(0,d.DIRTY)(s.value):s}}if("refinement"===s.type){let e=e=>{let t=s.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?d.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?d.INVALID:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}}if("transform"===s.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,d.isValid)(e)?Promise.resolve(s.transform(e.value,a)).then(e=>({status:t.value,value:e})):d.INVALID);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,d.isValid)(e))return d.INVALID;let n=s.transform(e.value,a);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}u.util.assertNever(s)}}r.ZodEffects=el,r.ZodTransformer=el,el.create=(e,t,r)=>new el({schema:e,typeName:s.ZodEffects,effect:t,...h(r)}),el.createWithPreprocess=(e,t,r)=>new el({schema:t,effect:{type:"preprocess",transform:e},typeName:s.ZodEffects,...h(r)});class ed extends f{_parse(e){return this._getType(e)===u.ZodParsedType.undefined?(0,d.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodOptional=ed,ed.create=(e,t)=>new ed({innerType:e,typeName:s.ZodOptional,...h(t)});class eu extends f{_parse(e){return this._getType(e)===u.ZodParsedType.null?(0,d.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodNullable=eu,eu.create=(e,t)=>new eu({innerType:e,typeName:s.ZodNullable,...h(t)});class ec extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===u.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}r.ZodDefault=ec,ec.create=(e,t)=>new ec({innerType:e,typeName:s.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...h(t)});class ep extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,d.isAsync)(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new i.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new i.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}r.ZodCatch=ep,ep.create=(e,t)=>new ep({innerType:e,typeName:s.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...h(t)});class eh extends f{_parse(e){if(this._getType(e)!==u.ZodParsedType.nan){let t=this._getOrReturnCtx(e);return(0,d.addIssueToContext)(t,{code:i.ZodIssueCode.invalid_type,expected:u.ZodParsedType.nan,received:t.parsedType}),d.INVALID}return{status:"valid",value:e.data}}}r.ZodNaN=eh,eh.create=e=>new eh({typeName:s.ZodNaN,...h(e)}),r.BRAND=Symbol("zod_brand");class ef extends f{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}r.ZodBranded=ef;class em extends f{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?d.INVALID:"dirty"===e.status?(t.dirty(),(0,d.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?d.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new em({in:e,out:t,typeName:s.ZodPipeline})}}r.ZodPipeline=em;class ey extends f{_parse(e){let t=this._def.innerType._parse(e),r=e=>((0,d.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,d.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function eg(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function e_(e,t={},r){return e?F.create().superRefine((s,a)=>{let n=e(s);if(n instanceof Promise)return n.then(e=>{if(!e){let e=eg(t,s),n=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:n})}});if(!n){let e=eg(t,s),n=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:n})}}):F.create()}r.ZodReadonly=ey,ey.create=(e,t)=>new ey({innerType:e,typeName:s.ZodReadonly,...h(t)}),r.late={object:W.lazycreate},(a=s||(r.ZodFirstPartyTypeKind=s={})).ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly",r.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>e_(t=>t instanceof e,t);let ev=E.create;r.string=ev;let eb=N.create;r.number=eb,r.nan=eh.create,r.bigint=j.create;let ew=M.create;r.boolean=ew,r.date=D.create,r.symbol=$.create,r.undefined=L.create,r.null=U.create,r.any=F.create,r.unknown=V.create,r.never=q.create,r.void=K.create,r.array=z.create,r.object=W.create,r.strictObject=W.strictCreate,r.union=B.create,r.discriminatedUnion=H.create,r.intersection=X.create,r.tuple=Y.create,r.record=G.create,r.map=Q.create,r.set=ee.create,r.function=et.create,r.lazy=er.create,r.literal=es.create,r.enum=en.create,r.nativeEnum=ei.create,r.promise=eo.create;let ek=el.create;r.effect=ek,r.transformer=ek,r.optional=ed.create,r.nullable=eu.create,r.preprocess=el.createWithPreprocess,r.pipeline=em.create,r.ostring=()=>ev().optional(),r.onumber=()=>eb().optional(),r.oboolean=()=>ew().optional(),r.coerce={string:e=>E.create({...e,coerce:!0}),number:e=>N.create({...e,coerce:!0}),boolean:e=>M.create({...e,coerce:!0}),bigint:e=>j.create({...e,coerce:!0}),date:e=>D.create({...e,coerce:!0})},r.NEVER=d.INVALID},81065,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(40856),r),a(e.r(50442),r),a(e.r(8416),r),a(e.r(92524),r),a(e.r(18726),r),a(e.r(16016),r)},90700,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t},i=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.z=void 0;let o=n(e.r(81065));r.z=o,i(e.r(81065),r),r.default=o},66576,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseAnyDef=void 0;let s=e.r(67179);r.parseAnyDef=function(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?(0,s.getRelativePath)(t,e.currentPath):t.join("/")}}},82951,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseArrayDef=void 0;let s=e.r(90700),a=e.r(78254),n=e.r(63396);r.parseArrayDef=function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==s.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,n.parseDef)(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(0,a.setResponseValueAndErrors)(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,a.setResponseValueAndErrors)(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&((0,a.setResponseValueAndErrors)(r,"minItems",e.exactLength.value,e.exactLength.message,t),(0,a.setResponseValueAndErrors)(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}},82139,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseBigintDef=void 0;let s=e.r(78254);r.parseBigintDef=function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?(0,s.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,s.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,s.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,s.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,s.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,s.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,s.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},36395,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseBooleanDef=void 0,r.parseBooleanDef=function(){return{type:"boolean"}}},43773,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseBrandedDef=void 0;let s=e.r(63396);r.parseBrandedDef=function(e,t){return(0,s.parseDef)(e.type._def,t)}},12170,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseCatchDef=void 0;let s=e.r(63396);r.parseCatchDef=(e,t)=>(0,s.parseDef)(e.innerType._def,t)},29280,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseDateDef=void 0;let s=e.r(78254);r.parseDateDef=function e(t,r,s){let n=s??r.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,a)=>e(t,r,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return a(t,r)}};let a=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let a of e.checks)switch(a.kind){case"min":(0,s.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t);break;case"max":(0,s.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t)}return r}},72597,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseDefaultDef=void 0;let s=e.r(63396);r.parseDefaultDef=function(e,t){return{...(0,s.parseDef)(e.innerType._def,t),default:e.defaultValue()}}},31891,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseEffectsDef=void 0;let s=e.r(63396),a=e.r(66576);r.parseEffectsDef=function(e,t){return"input"===t.effectStrategy?(0,s.parseDef)(e.schema._def,t):(0,a.parseAnyDef)(t)}},67479,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseEnumDef=void 0,r.parseEnumDef=function(e){return{type:"string",enum:Array.from(e.values)}}},26877,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseIntersectionDef=void 0;let s=e.r(63396);r.parseIntersectionDef=function(e,t){let r=[(0,s.parseDef)(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),(0,s.parseDef)(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,n=[];return r.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)n.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...s}=e;t=s}else a=void 0;n.push(t)}}),n.length?{allOf:n,...a}:void 0}},63757,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseLiteralDef=void 0,r.parseLiteralDef=function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},44533,(e,t,r)=>{"use strict";let s;Object.defineProperty(r,"__esModule",{value:!0}),r.parseStringDef=r.zodPatterns=void 0;let a=e.r(78254);function n(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)i.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}r.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===s&&(s=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),s),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/},r.parseStringDef=function(e,t){let s={type:"string"};if(e.checks)for(let i of e.checks)switch(i.kind){case"min":(0,a.setResponseValueAndErrors)(s,"minLength","number"==typeof s.minLength?Math.max(s.minLength,i.value):i.value,i.message,t);break;case"max":(0,a.setResponseValueAndErrors)(s,"maxLength","number"==typeof s.maxLength?Math.min(s.maxLength,i.value):i.value,i.message,t);break;case"email":switch(t.emailStrategy){case"format:email":o(s,"email",i.message,t);break;case"format:idn-email":o(s,"idn-email",i.message,t);break;case"pattern:zod":l(s,r.zodPatterns.email,i.message,t)}break;case"url":o(s,"uri",i.message,t);break;case"uuid":o(s,"uuid",i.message,t);break;case"regex":l(s,i.regex,i.message,t);break;case"cuid":l(s,r.zodPatterns.cuid,i.message,t);break;case"cuid2":l(s,r.zodPatterns.cuid2,i.message,t);break;case"startsWith":l(s,RegExp(`^${n(i.value,t)}`),i.message,t);break;case"endsWith":l(s,RegExp(`${n(i.value,t)}$`),i.message,t);break;case"datetime":o(s,"date-time",i.message,t);break;case"date":o(s,"date",i.message,t);break;case"time":o(s,"time",i.message,t);break;case"duration":o(s,"duration",i.message,t);break;case"length":(0,a.setResponseValueAndErrors)(s,"minLength","number"==typeof s.minLength?Math.max(s.minLength,i.value):i.value,i.message,t),(0,a.setResponseValueAndErrors)(s,"maxLength","number"==typeof s.maxLength?Math.min(s.maxLength,i.value):i.value,i.message,t);break;case"includes":l(s,RegExp(n(i.value,t)),i.message,t);break;case"ip":"v6"!==i.version&&o(s,"ipv4",i.message,t),"v4"!==i.version&&o(s,"ipv6",i.message,t);break;case"base64url":l(s,r.zodPatterns.base64url,i.message,t);break;case"jwt":l(s,r.zodPatterns.jwt,i.message,t);break;case"cidr":"v6"!==i.version&&l(s,r.zodPatterns.ipv4Cidr,i.message,t),"v4"!==i.version&&l(s,r.zodPatterns.ipv6Cidr,i.message,t);break;case"emoji":l(s,r.zodPatterns.emoji(),i.message,t);break;case"ulid":l(s,r.zodPatterns.ulid,i.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":o(s,"binary",i.message,t);break;case"contentEncoding:base64":(0,a.setResponseValueAndErrors)(s,"contentEncoding","base64",i.message,t);break;case"pattern:zod":l(s,r.zodPatterns.base64,i.message,t)}break;case"nanoid":l(s,r.zodPatterns.nanoid,i.message,t)}return s};let i=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function o(e,t,r,s){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&s.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&s.errorMessages&&{errorMessage:{format:r}}})):(0,a.setResponseValueAndErrors)(e,"format",t,r,s)}function l(e,t,r,s){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&s.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:d(t,s),...r&&s.errorMessages&&{errorMessage:{pattern:r}}})):(0,a.setResponseValueAndErrors)(e,"pattern",d(t,s),r,s)}function d(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=r.i?e.source.toLowerCase():e.source,a="",n=!1,i=!1,o=!1;for(let e=0;e<s.length;e++){if(n){a+=s[e],n=!1;continue}if(r.i){if(i){if(s[e].match(/[a-z]/)){o?(a+=s[e],a+=`${s[e-2]}-${s[e]}`.toUpperCase(),o=!1):"-"===s[e+1]&&s[e+2]?.match(/[a-z]/)?(a+=s[e],o=!0):a+=`${s[e]}${s[e].toUpperCase()}`;continue}}else if(s[e].match(/[a-z]/)){a+=`[${s[e]}${s[e].toUpperCase()}]`;continue}}if(r.m){if("^"===s[e]){a+=`(^|(?<=[\r
]))`;continue}else if("$"===s[e]){a+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===s[e]){a+=i?`${s[e]}\r
`:`[${s[e]}\r
]`;continue}a+=s[e],"\\"===s[e]?n=!0:i&&"]"===s[e]?i=!1:i||"["!==s[e]||(i=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}},71031,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseRecordDef=void 0;let s=e.r(90700),a=e.r(63396),n=e.r(44533),i=e.r(43773),o=e.r(66576);r.parseRecordDef=function(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===s.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,s)=>({...r,[s]:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",s]})??(0,o.parseAnyDef)(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===s.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){let{type:s,...a}=(0,n.parseStringDef)(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===s.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===s.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===s.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.type._def.checks?.length){let{type:s,...a}=(0,i.parseBrandedDef)(e.keyType._def,t);return{...r,propertyNames:a}}return r}},91027,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseMapDef=void 0;let s=e.r(63396),a=e.r(71031),n=e.r(66576);r.parseMapDef=function(e,t){return"record"===t.mapStrategy?(0,a.parseRecordDef)(e,t):{type:"array",maxItems:125,items:{type:"array",items:[(0,s.parseDef)(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||(0,n.parseAnyDef)(t),(0,s.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||(0,n.parseAnyDef)(t)],minItems:2,maxItems:2}}}},62773,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseNativeEnumDef=void 0,r.parseNativeEnumDef=function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),s=Array.from(new Set(r.map(e=>typeof e)));return{type:1===s.length?"string"===s[0]?"string":"number":["string","number"],enum:r}}},62474,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseNeverDef=void 0;let s=e.r(66576);r.parseNeverDef=function(e){return"openAi"===e.target?void 0:{not:(0,s.parseAnyDef)({...e,currentPath:[...e.currentPath,"not"]})}}},1127,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseNullDef=void 0,r.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},8827,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseUnionDef=r.primitiveMappings=void 0;let s=e.r(63396);r.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},r.parseUnionDef=function(e,t){if("openApi3"===t.target)return a(e,t);let s=e.options instanceof Map?Array.from(e.options.values()):e.options;if(s.every(e=>e._def.typeName in r.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){let e=s.reduce((e,t)=>{let s=r.primitiveMappings[t._def.typeName];return s&&!e.includes(s)?[...e,s]:e},[]);return{type:e.length>1?e:e[0]}}if(s.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=s.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===s.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:s.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(s.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:s.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a(e,t)};let a=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,s.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},91543,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseNullableDef=void 0;let s=e.r(63396),a=e.r(8827);r.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:a.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[a.primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=(0,s.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=(0,s.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}},92662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseNumberDef=void 0;let s=e.r(78254);r.parseNumberDef=function(e,t){let r={type:"number"};if(!e.checks)return r;for(let a of e.checks)switch(a.kind){case"int":r.type="integer",(0,s.addErrorMessage)(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?(0,s.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,s.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,s.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,s.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,s.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,s.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,s.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},20197,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseObjectDef=void 0;let s=e.r(63396);r.parseObjectDef=function(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},n=[],i=e.shape();for(let e in i){let o=i[e];if(void 0===o||void 0===o._def)continue;let l=function(e){try{return e.isOptional()}catch{return!0}}(o);l&&r&&("ZodOptional"===o._def.typeName&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),l=!1);let d=(0,s.parseDef)(o._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==d&&(a.properties[e]=d,l||n.push(e))}n.length&&(a.required=n);let o=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return(0,s.parseDef)(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==o&&(a.additionalProperties=o),a}},28958,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseOptionalDef=void 0;let s=e.r(63396),a=e.r(66576);r.parseOptionalDef=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return(0,s.parseDef)(e.innerType._def,t);let r=(0,s.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:(0,a.parseAnyDef)(t)},r]}:(0,a.parseAnyDef)(t)}},59190,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePipelineDef=void 0;let s=e.r(63396);r.parsePipelineDef=(e,t)=>{if("input"===t.pipeStrategy)return(0,s.parseDef)(e.in._def,t);if("output"===t.pipeStrategy)return(0,s.parseDef)(e.out._def,t);let r=(0,s.parseDef)(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=(0,s.parseDef)(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(e=>void 0!==e)}}},54043,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parsePromiseDef=void 0;let s=e.r(63396);r.parsePromiseDef=function(e,t){return(0,s.parseDef)(e.type._def,t)}},76853,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseSetDef=void 0;let s=e.r(78254),a=e.r(63396);r.parseSetDef=function(e,t){let r={type:"array",uniqueItems:!0,items:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(0,s.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,s.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}},79775,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTupleDef=void 0;let s=e.r(63396);r.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,s.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,s.parseDef)(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,s.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}},34022,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseUndefinedDef=void 0;let s=e.r(66576);r.parseUndefinedDef=function(e){return{not:(0,s.parseAnyDef)(e)}}},91358,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseUnknownDef=void 0;let s=e.r(66576);r.parseUnknownDef=function(e){return(0,s.parseAnyDef)(e)}},87442,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseReadonlyDef=void 0;let s=e.r(63396);r.parseReadonlyDef=(e,t)=>(0,s.parseDef)(e.innerType._def,t)},7582,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.selectParser=void 0;let s=e.r(90700),a=e.r(66576),n=e.r(82951),i=e.r(82139),o=e.r(36395),l=e.r(43773),d=e.r(12170),u=e.r(29280),c=e.r(72597),p=e.r(31891),h=e.r(67479),f=e.r(26877),m=e.r(63757),y=e.r(91027),g=e.r(62773),_=e.r(62474),v=e.r(1127),b=e.r(91543),w=e.r(92662),k=e.r(20197),x=e.r(28958),T=e.r(59190),P=e.r(54043),S=e.r(71031),Z=e.r(76853),I=e.r(44533),A=e.r(79775),O=e.r(34022),C=e.r(8827),R=e.r(91358),E=e.r(87442);r.selectParser=(e,t,r)=>{switch(t){case s.ZodFirstPartyTypeKind.ZodString:return(0,I.parseStringDef)(e,r);case s.ZodFirstPartyTypeKind.ZodNumber:return(0,w.parseNumberDef)(e,r);case s.ZodFirstPartyTypeKind.ZodObject:return(0,k.parseObjectDef)(e,r);case s.ZodFirstPartyTypeKind.ZodBigInt:return(0,i.parseBigintDef)(e,r);case s.ZodFirstPartyTypeKind.ZodBoolean:return(0,o.parseBooleanDef)();case s.ZodFirstPartyTypeKind.ZodDate:return(0,u.parseDateDef)(e,r);case s.ZodFirstPartyTypeKind.ZodUndefined:return(0,O.parseUndefinedDef)(r);case s.ZodFirstPartyTypeKind.ZodNull:return(0,v.parseNullDef)(r);case s.ZodFirstPartyTypeKind.ZodArray:return(0,n.parseArrayDef)(e,r);case s.ZodFirstPartyTypeKind.ZodUnion:case s.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,C.parseUnionDef)(e,r);case s.ZodFirstPartyTypeKind.ZodIntersection:return(0,f.parseIntersectionDef)(e,r);case s.ZodFirstPartyTypeKind.ZodTuple:return(0,A.parseTupleDef)(e,r);case s.ZodFirstPartyTypeKind.ZodRecord:return(0,S.parseRecordDef)(e,r);case s.ZodFirstPartyTypeKind.ZodLiteral:return(0,m.parseLiteralDef)(e,r);case s.ZodFirstPartyTypeKind.ZodEnum:return(0,h.parseEnumDef)(e);case s.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,g.parseNativeEnumDef)(e);case s.ZodFirstPartyTypeKind.ZodNullable:return(0,b.parseNullableDef)(e,r);case s.ZodFirstPartyTypeKind.ZodOptional:return(0,x.parseOptionalDef)(e,r);case s.ZodFirstPartyTypeKind.ZodMap:return(0,y.parseMapDef)(e,r);case s.ZodFirstPartyTypeKind.ZodSet:return(0,Z.parseSetDef)(e,r);case s.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case s.ZodFirstPartyTypeKind.ZodPromise:return(0,P.parsePromiseDef)(e,r);case s.ZodFirstPartyTypeKind.ZodNaN:case s.ZodFirstPartyTypeKind.ZodNever:return(0,_.parseNeverDef)(r);case s.ZodFirstPartyTypeKind.ZodEffects:return(0,p.parseEffectsDef)(e,r);case s.ZodFirstPartyTypeKind.ZodAny:return(0,a.parseAnyDef)(r);case s.ZodFirstPartyTypeKind.ZodUnknown:return(0,R.parseUnknownDef)(r);case s.ZodFirstPartyTypeKind.ZodDefault:return(0,c.parseDefaultDef)(e,r);case s.ZodFirstPartyTypeKind.ZodBranded:return(0,l.parseBrandedDef)(e,r);case s.ZodFirstPartyTypeKind.ZodReadonly:return(0,E.parseReadonlyDef)(e,r);case s.ZodFirstPartyTypeKind.ZodCatch:return(0,d.parseCatchDef)(e,r);case s.ZodFirstPartyTypeKind.ZodPipeline:return(0,T.parsePipelineDef)(e,r);case s.ZodFirstPartyTypeKind.ZodFunction:case s.ZodFirstPartyTypeKind.ZodVoid:case s.ZodFirstPartyTypeKind.ZodSymbol:default:return}}},63396,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseDef=void 0;let s=e.r(26448),a=e.r(7582),n=e.r(67179),i=e.r(66576);r.parseDef=function e(t,r,n=!1){let i=r.seen.get(t);if(r.override){let e=r.override?.(t,r,i,n);if(e!==s.ignoreOverride)return e}if(i&&!n){let e=o(i,r);if(void 0!==e)return e}let d={def:t,path:r.currentPath,jsonSchema:void 0};r.seen.set(t,d);let u=(0,a.selectParser)(t,t.typeName,r),c="function"==typeof u?e(u(),r):u;if(c&&l(t,r,c),r.postProcess){let e=r.postProcess(c,t,r);return d.jsonSchema=c,e}return d.jsonSchema=c,c};let o=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:(0,n.getRelativePath)(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),(0,i.parseAnyDef)(t);return"seen"===t.$refStrategy?(0,i.parseAnyDef)(t):void 0}},l=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r)},13307,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},77179,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.zodToJsonSchema=void 0;let s=e.r(63396),a=e.r(42126),n=e.r(66576);r.zodToJsonSchema=(e,t)=>{let r=(0,a.getRefs)(t),i="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:(0,s.parseDef)(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??(0,n.parseAnyDef)(r)}),{}):void 0,o="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,l=(0,s.parseDef)(e._def,void 0===o?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??(0,n.parseAnyDef)(r),d="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==d&&(l.title=d),r.flags.hasReferencedOpenAiAnyType&&(i||(i={}),i[r.openAiAnyTypeName]||(i[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let u=void 0===o?i?{...l,[r.definitionPath]:i}:l:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...i,[o]:l}};return"jsonSchema7"===r.target?u.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u}},41666,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(26448),r),a(e.r(42126),r),a(e.r(78254),r),a(e.r(67179),r),a(e.r(63396),r),a(e.r(13307),r),a(e.r(66576),r),a(e.r(82951),r),a(e.r(82139),r),a(e.r(36395),r),a(e.r(43773),r),a(e.r(12170),r),a(e.r(29280),r),a(e.r(72597),r),a(e.r(31891),r),a(e.r(67479),r),a(e.r(26877),r),a(e.r(63757),r),a(e.r(91027),r),a(e.r(62773),r),a(e.r(62474),r),a(e.r(1127),r),a(e.r(91543),r),a(e.r(92662),r),a(e.r(20197),r),a(e.r(28958),r),a(e.r(59190),r),a(e.r(54043),r),a(e.r(87442),r),a(e.r(71031),r),a(e.r(76853),r),a(e.r(44533),r),a(e.r(79775),r),a(e.r(34022),r),a(e.r(8827),r),a(e.r(91358),r),a(e.r(7582),r),a(e.r(77179),r),r.default=e.r(77179).zodToJsonSchema},36065,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TextResponseSchema=void 0,r.TextResponseSchema={type:"object",description:"Use this as a fallback when no other response template is applicable",properties:{type:{const:"text"},text:{type:"string",description:"plaintext message to be displayed to the user"}},required:["type","text"],additionalProperties:!1}},76186,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.templatesToResponseFormat=r.zodToTemplateSchema=void 0;let s=e.r(41666),a=e.r(36065);r.zodToTemplateSchema=(e,t,r)=>({type:"object",description:r,properties:{type:{const:"template"},name:{const:t},templateProps:(0,s.zodToJsonSchema)(e)},required:["name","templateProps","type"],additionalProperties:!1}),r.templatesToResponseFormat=(...e)=>({type:"json_schema",json_schema:{name:"json_schema",schema:{type:"object",properties:{response:{type:"array",items:{oneOf:[a.TextResponseSchema,...e.map(e=>(0,r.zodToTemplateSchema)(e.schema,e.name,e.description))]}}},required:["response"],additionalProperties:!1}}})},71511,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toOpenAIMessages=r.fromOpenAICompletion=void 0;let s=e.r(45678);r.fromOpenAICompletion=(e,t)=>{let{stream:r,onText:a,onEnd:n,onError:i,onLLMEnd:o}=(0,s.crayonStream)(t);return(async()=>{try{for await(let t of e){let e=t.choices[0]?.delta?.content;e&&a(e)}o(),n()}catch(e){e instanceof Error?i(e):i(Error(String(e)))}})(),r},r.toOpenAIMessages=e=>{let t=[];for(let r of e)r.message&&("user"===r.role?t.push({role:r.role,content:r.message}):"assistant"===r.role&&t.push({role:r.role,content:JSON.stringify({response:r.message})}));return t}},89781,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.transformStream=void 0,r.transformStream=(e,t,r)=>{let s=!!r?.onEnd;return new ReadableStream({async start(a){let n=[];try{for await(let i of(r?.onStart?.(),e)){r?.onRawChunk?.(i);let e=t(i);e&&(s&&n.push(e),r?.onTransformedChunk?.(e),a.enqueue(e))}}catch(e){r?.onError?.(e),a.error(e)}finally{r?.onEnd?.({accumulated:n}),a.close()}}})}},60901,(e,t,r)=>{"use strict";var s=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(88210),r),a(e.r(45678),r),a(e.r(76186),r),a(e.r(71511),r),a(e.r(36065),r),a(e.r(60068),r),a(e.r(16331),r),a(e.r(89781),r)},76876,e=>{"use strict";let t,r,s;var a,n,i,o,l,d,u,c,p,h,f,m,y,g,_,v,b,w,k,x,T,P,S,Z,I,A,O,C,R,E,N,j,M,D,$,L,U,F,V,q,K,z,W,B,J,H,X,Y,G,Q,ee,et,er,es,ea,en,ei,eo,el,ed,eu,ec,ep,eh,ef,em,ey,eg,e_=e.i(95133),ev=e.i(72247),eb=e.i(69617),ew=e.i(45715),ek=e.i(95188),ex=e.i(15518),eT=e.i(58554),eP=e.i(819),eS=e.i(98296),eZ=e.i(3813),eI=e.i(40631),eA=e.i(64122),eO=e.i(74647),eC=e.i(53223),eR=e.i(47326),eE=e.i(93695);e.i(47145);var eN=e.i(71813);function ej(e,t,r,s,a){if("m"===s)throw TypeError("Private method is not writable");if("a"===s&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(e,r):a?a.value=r:t.set(e,r),r}function eM(e,t,r,s){if("a"===r&&!s)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)}let eD=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return eD=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),r=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^r()&15>>e/4).toString(16))};function e$(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let eL=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class eU extends Error{}class eF extends eU{constructor(e,t,r,s){super(`${eF.makeMessage(e,t,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("request-id"),this.error=t}static makeMessage(e,t,r){let s=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,r,s){return e&&s?400===e?new ez(e,t,r,s):401===e?new eW(e,t,r,s):403===e?new eB(e,t,r,s):404===e?new eJ(e,t,r,s):409===e?new eH(e,t,r,s):422===e?new eX(e,t,r,s):429===e?new eY(e,t,r,s):e>=500?new eG(e,t,r,s):new eF(e,t,r,s):new eq({message:r,cause:eL(t)})}}class eV extends eF{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class eq extends eF{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class eK extends eq{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ez extends eF{}class eW extends eF{}class eB extends eF{}class eJ extends eF{}class eH extends eF{}class eX extends eF{}class eY extends eF{}class eG extends eF{}let eQ=/^[a-z][a-z0-9+.-]*:/i,e0=e=>(e0=Array.isArray)(e),e1=e0;function e2(e){return"object"!=typeof e?{}:e??{}}let e9=e=>{try{return JSON.parse(e)}catch(e){return}},e4="0.75.0",e6=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",e5=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";function e3(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function e7(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return e3({start(){},async pull(e){let{done:r,value:s}=await t.next();r?e.close():e.enqueue(s)},async cancel(){await t.return?.()}})}function e8(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function te(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await e[Symbol.asyncIterator]().return?.();let t=e.getReader(),r=t.cancel();t.releaseLock(),await r}let tt=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function tr(e){let t;return(r??(r=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function ts(e){let t;return(s??(s=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class ta{constructor(){a.set(this,void 0),n.set(this,void 0),ej(this,a,new Uint8Array,"f"),ej(this,n,null,"f")}decode(e){let t;if(null==e)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?tr(e):e;ej(this,a,function(e){let t=0;for(let r of e)t+=r.length;let r=new Uint8Array(t),s=0;for(let t of e)r.set(t,s),s+=t.length;return r}([eM(this,a,"f"),r]),"f");let s=[];for(;null!=(t=function(e,t){for(let r=t??0;r<e.length;r++){if(10===e[r])return{preceding:r,index:r+1,carriage:!1};if(13===e[r])return{preceding:r,index:r+1,carriage:!0}}return null}(eM(this,a,"f"),eM(this,n,"f")));){if(t.carriage&&null==eM(this,n,"f")){ej(this,n,t.index,"f");continue}if(null!=eM(this,n,"f")&&(t.index!==eM(this,n,"f")+1||t.carriage)){s.push(ts(eM(this,a,"f").subarray(0,eM(this,n,"f")-1))),ej(this,a,eM(this,a,"f").subarray(eM(this,n,"f")),"f"),ej(this,n,null,"f");continue}let e=null!==eM(this,n,"f")?t.preceding-1:t.preceding,r=ts(eM(this,a,"f").subarray(0,e));s.push(r),ej(this,a,eM(this,a,"f").subarray(t.index),"f"),ej(this,n,null,"f")}return s}flush(){return eM(this,a,"f").length?this.decode("\n"):[]}}a=new WeakMap,n=new WeakMap,ta.NEWLINE_CHARS=new Set(["\n","\r"]),ta.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let tn={off:0,error:200,warn:300,info:400,debug:500},ti=(e,t,r)=>{if(e){if(Object.prototype.hasOwnProperty.call(tn,e))return e;tc(r).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(tn))}`)}};function to(){}function tl(e,t,r){return!t||tn[e]>tn[r]?to:t[e].bind(t)}let td={error:to,warn:to,info:to,debug:to},tu=new WeakMap;function tc(e){let t=e.logger,r=e.logLevel??"off";if(!t)return td;let s=tu.get(t);if(s&&s[0]===r)return s[1];let a={error:tl("error",t,r),warn:tl("warn",t,r),info:tl("info",t,r),debug:tl("debug",t,r)};return tu.set(t,[r,a]),a}let tp=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);class th{constructor(e,t,r){this.iterator=e,i.set(this,void 0),this.controller=t,ej(this,i,r,"f")}static fromSSEResponse(e,t,r){let s=!1,a=r?tc(r):console;async function*n(){if(s)throw new eU("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let r=!1;try{for await(let r of tf(e,t)){if("completion"===r.event)try{yield JSON.parse(r.data)}catch(e){throw a.error("Could not parse message into JSON:",r.data),a.error("From chunk:",r.raw),e}if("message_start"===r.event||"message_delta"===r.event||"message_stop"===r.event||"content_block_start"===r.event||"content_block_delta"===r.event||"content_block_stop"===r.event)try{yield JSON.parse(r.data)}catch(e){throw a.error("Could not parse message into JSON:",r.data),a.error("From chunk:",r.raw),e}if("ping"!==r.event&&"error"===r.event)throw new eF(void 0,e9(r.data)??r.data,void 0,e.headers)}r=!0}catch(e){if(e$(e))return;throw e}finally{r||t.abort()}}return new th(n,t,r)}static fromReadableStream(e,t,r){let s=!1;async function*a(){let t=new ta;for await(let r of e8(e))for(let e of t.decode(r))yield e;for(let e of t.flush())yield e}return new th(async function*(){if(s)throw new eU("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let e=!1;try{for await(let t of a())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(e$(e))return;throw e}finally{e||t.abort()}},t,r)}[(i=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),s=s=>({next:()=>{if(0===s.length){let s=r.next();e.push(s),t.push(s)}return s.shift()}});return[new th(()=>s(e),this.controller,eM(this,i,"f")),new th(()=>s(t),this.controller,eM(this,i,"f"))]}toReadableStream(){let e,t=this;return e3({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:r,done:s}=await e.next();if(s)return t.close();let a=tr(JSON.stringify(r)+"\n");t.enqueue(a)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*tf(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eU("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eU("Attempted to iterate over a response with no body")}let r=new ty,s=new ta;for await(let t of tm(e8(e.body)))for(let e of s.decode(t)){let t=r.decode(e);t&&(yield t)}for(let e of s.flush()){let t=r.decode(e);t&&(yield t)}}async function*tm(e){let t=new Uint8Array;for await(let r of e){let e;if(null==r)continue;let s=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?tr(r):r,a=new Uint8Array(t.length+s.length);for(a.set(t),a.set(s,t.length),t=a;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class ty{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let r;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,a,n]=-1!==(r=(t=e).indexOf(":"))?[t.substring(0,r),":",t.substring(r+1)]:[t,"",""];return n.startsWith(" ")&&(n=n.substring(1)),"event"===s?this.event=n:"data"===s&&this.data.push(n),null}}async function tg(e,t){let{response:r,requestLogID:s,retryOfRequestLogID:a,startTime:n}=t,i=await (async()=>{if(t.options.stream)return(tc(e).debug("response",r.status,r.url,r.headers,r.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(r,t.controller):th.fromSSEResponse(r,t.controller);if(204===r.status)return null;if(t.options.__binaryResponse)return r;let s=r.headers.get("content-type"),a=s?.split(";")[0]?.trim();if(a?.includes("application/json")||a?.endsWith("+json")){if("0"===r.headers.get("content-length"))return;return t_(await r.json(),r)}return await r.text()})();return tc(e).debug(`[${s}] response parsed`,tp({retryOfRequestLogID:a,url:r.url,status:r.status,body:i,durationMs:Date.now()-n})),i}function t_(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class tv extends Promise{constructor(e,t,r=tg){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=r,o.set(this,void 0),ej(this,o,e,"f")}_thenUnwrap(e){return new tv(eM(this,o,"f"),this.responsePromise,async(t,r)=>t_(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(eM(this,o,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}o=new WeakMap;class tb{constructor(e,t,r,s){l.set(this,void 0),ej(this,l,e,"f"),this.options=s,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new eU("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await eM(this,l,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(l=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class tw extends tv{constructor(e,t,r){super(e,t,async(e,t)=>new r(e,t.response,await tg(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class tk extends tb{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let e=this.first_id;return e?{...this.options,query:{...e2(this.options.query),before_id:e}}:null}let e=this.last_id;return e?{...this.options,query:{...e2(this.options.query),after_id:e}}:null}}class tx extends tb{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.next_page=r.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){let e=this.next_page;return e?{...this.options,query:{...e2(this.options.query),page:e}}:null}}let tT=()=>{if("u"<typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tP(e,t,r){return tT(),new File(e,t??"unknown_file",r)}function tS(e,t){let r="object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"";return t?r.split(/[\\/]/).pop()||void 0:r}let tZ=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tI=async(e,t,r=!0)=>({...e,body:await tO(e.body,t,r)}),tA=new WeakMap,tO=async(e,t,r=!0)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,r=tA.get(t);if(r)return r;let s=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;if(r.toString()===await new e(r).text())return!1;return!0}catch{return!0}})();return tA.set(t,s),s}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let s=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>tC(s,e,t,r))),s},tC=async(e,t,r,s)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(r instanceof Response){let a={},n=r.headers.get("Content-Type");n&&(a={type:n}),e.append(t,tP([await r.blob()],tS(r,s),a))}else if(tZ(r))e.append(t,tP([await new Response(e7(r)).blob()],tS(r,s)));else{let a;if((a=r)instanceof Blob&&"name"in a)e.append(t,tP([r],tS(r,s),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(r=>tC(e,t+"[]",r,s)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,a])=>tC(e,`${t}[${r}]`,a,s)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}}},tR=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function tE(e,t,r){let s,a;if(tT(),e=await e,t||(t=tS(e,!0)),null!=(s=e)&&"object"==typeof s&&"string"==typeof s.name&&"number"==typeof s.lastModified&&tR(s))return e instanceof File&&null==t&&null==r?e:tP([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...r});if(null!=(a=e)&&"object"==typeof a&&"string"==typeof a.url&&"function"==typeof a.blob){let s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),tP(await tN(s),t,r)}let n=await tN(e);if(!r?.type){let e=n.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(r={...r,type:e})}return tP(n,t,r)}async function tN(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(tR(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(tZ(e))for await(let r of e)t.push(...await tN(r));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class tj{constructor(e){this._client=e}}let tM=Symbol.for("brand.privateNullableHeaders"),tD=e=>{let t=new Headers,r=new Set;for(let s of e){let e=new Set;for(let[a,n]of function*(e){let t;if(!e)return;if(tM in e){let{values:t,nulls:r}=e;for(let e of(yield*t.entries(),r))yield[e,null];return}let r=!1;for(let s of(e instanceof Headers?t=e.entries():e1(e)?t=e:(r=!0,t=Object.entries(e??{})),t)){let e=s[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=e1(s[1])?s[1]:[s[1]],a=!1;for(let s of t)void 0!==s&&(r&&!a&&(a=!0,yield[e,null]),yield[e,s])}}(s)){let s=a.toLowerCase();e.has(s)||(t.delete(a),e.add(s)),null===n?(t.delete(a),r.add(s)):(t.append(a,n),r.delete(s))}}return{[tM]:!0,values:t,nulls:r}},t$=Symbol("anthropic.sdk.stainlessHelper");function tL(e){return"object"==typeof e&&null!==e&&t$ in e}function tU(e,t){let r=new Set;if(e)for(let t of e)tL(t)&&r.add(t[t$]);if(t){for(let e of t)if(tL(e)&&r.add(e[t$]),Array.isArray(e.content))for(let t of e.content)tL(t)&&r.add(t[t$])}return Array.from(r)}function tF(e,t){let r=tU(e,t);return 0===r.length?{}:{"x-stainless-helper":r.join(", ")}}function tV(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let tq=Object.freeze(Object.create(null)),tK=((e=tV)=>function(t,...r){let s;if(1===t.length)return t[0];let a=!1,n=[],i=t.reduce((t,s,i)=>{/[?#]/.test(s)&&(a=!0);let o=r[i],l=(a?encodeURIComponent:e)(""+o);return i!==r.length&&(null==o||"object"==typeof o&&o.toString===Object.getPrototypeOf(Object.getPrototypeOf(o.hasOwnProperty??tq)??tq)?.toString)&&(l=o+"",n.push({start:t.length+s.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(o).slice(8,-1)} is not a valid path parameter`})),t+s+(i===r.length?"":l)},""),o=i.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(s=l.exec(o));)n.push({start:s.index,length:s[0].length,error:`Value "${s[0]}" can't be safely passed as a path parameter`});if(n.sort((e,t)=>e.start-t.start),n.length>0){let e=0,t=n.reduce((t,r)=>{let s=" ".repeat(r.start-e),a="^".repeat(r.length);return e=r.start+r.length,t+s+a},"");throw new eU(`Path parameters result in path with invalid segments:
${n.map(e=>e.error).join("\n")}
${i}
${t}`)}return i})(tV);class tz extends tj{list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/files",tk,{query:s,...t,headers:tD([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},r){let{betas:s}=t??{};return this._client.delete(tK`/v1/files/${e}`,{...r,headers:tD([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(e,t={},r){let{betas:s}=t??{};return this._client.get(tK`/v1/files/${e}/content`,{...r,headers:tD([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},r){let{betas:s}=t??{};return this._client.get(tK`/v1/files/${e}`,{...r,headers:tD([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(e,t){var r;let{betas:s,...a}=e;return this._client.post("/v1/files",tI({body:a,...t,headers:tD([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},tL(r=a.file)?{"x-stainless-helper":r[t$]}:{},t?.headers])},this._client))}}class tW extends tj{retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tK`/v1/models/${e}?beta=true`,{...r,headers:tD([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/models?beta=true",tk,{query:s,...t,headers:tD([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers])})}}let tB={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};function tJ(e){return e?.output_format??e?.output_config?.format}function tH(e,t,r){let s=tJ(t);return t&&"parse"in(s??{})?tX(e,t,r):{...e,content:e.content.map(e=>"text"===e.type?Object.defineProperty(Object.defineProperty({...e},"parsed_output",{value:null,enumerable:!1}),"parsed",{get:()=>(r.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),null),enumerable:!1}):e),parsed_output:null}}function tX(e,t,r){let s=null,a=e.content.map(e=>{if("text"===e.type){let a=function(e,t){let r=tJ(e);if(r?.type!=="json_schema")return null;try{if("parse"in r)return r.parse(t);return JSON.parse(t)}catch(e){throw new eU(`Failed to parse structured output: ${e}`)}}(t,e.text);return null===s&&(s=a),Object.defineProperty(Object.defineProperty({...e},"parsed_output",{value:a,enumerable:!1}),"parsed",{get:()=>(r.logger.warn("The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead."),a),enumerable:!1})}return e});return{...e,content:a,parsed_output:s}}let tY=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return tY(e=e.slice(0,e.length-1));case"number":let r=t.value[t.value.length-1];if("."===r||"-"===r)return tY(e=e.slice(0,e.length-1));case"string":let s=e[e.length-2];if(s?.type==="delimiter"||s?.type==="brace"&&"{"===s.value)return tY(e=e.slice(0,e.length-1));break;case"delimiter":return tY(e=e.slice(0,e.length-1))}return e},tG=e=>{var t;let r,s;return JSON.parse((t=tY((e=>{let t=0,r=[];for(;t<e.length;){let s=e[t];if("\\"===s){t++;continue}if("{"===s){r.push({type:"brace",value:"{"}),t++;continue}if("}"===s){r.push({type:"brace",value:"}"}),t++;continue}if("["===s){r.push({type:"paren",value:"["}),t++;continue}if("]"===s){r.push({type:"paren",value:"]"}),t++;continue}if(":"===s){r.push({type:"separator",value:":"}),t++;continue}if(","===s){r.push({type:"delimiter",value:","}),t++;continue}if('"'===s){let a="",n=!1;for(s=e[++t];'"'!==s;){if(t===e.length){n=!0;break}if("\\"===s){if(++t===e.length){n=!0;break}a+=s+e[t],s=e[++t]}else a+=s,s=e[++t]}s=e[++t],n||r.push({type:"string",value:a});continue}let a=/\s/;if(s&&a.test(s)){t++;continue}let n=/[0-9]/;if(s&&n.test(s)||"-"===s||"."===s){let a="";for("-"===s&&(a+=s,s=e[++t]);s&&n.test(s)||"."===s;)a+=s,s=e[++t];r.push({type:"number",value:a});continue}let i=/[a-z]/i;if(s&&i.test(s)){let a="";for(;s&&i.test(s)&&t!==e.length;)a+=s,s=e[++t];"true"==a||"false"==a||"null"===a?r.push({type:"name",value:a}):t++;continue}t++}return r})(e)),r=[],t.map(e=>{"brace"===e.type&&("{"===e.value?r.push("}"):r.splice(r.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?r.push("]"):r.splice(r.lastIndexOf("]"),1))}),r.length>0&&r.reverse().map(e=>{"}"===e?t.push({type:"brace",value:"}"}):"]"===e&&t.push({type:"paren",value:"]"})}),s="",t.map(e=>{"string"===e.type?s+='"'+e.value+'"':s+=e.value}),s))},tQ="__json_buf";function t0(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class t1{constructor(e,t){d.add(this),this.messages=[],this.receivedMessages=[],u.set(this,void 0),c.set(this,null),this.controller=new AbortController,p.set(this,void 0),h.set(this,()=>{}),f.set(this,()=>{}),m.set(this,void 0),y.set(this,()=>{}),g.set(this,()=>{}),_.set(this,{}),v.set(this,!1),b.set(this,!1),w.set(this,!1),k.set(this,!1),x.set(this,void 0),T.set(this,void 0),P.set(this,void 0),I.set(this,e=>{if(ej(this,b,!0,"f"),e$(e)&&(e=new eV),e instanceof eV)return ej(this,w,!0,"f"),this._emit("abort",e);if(e instanceof eU)return this._emit("error",e);if(e instanceof Error){let t=new eU(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eU(String(e)))}),ej(this,p,new Promise((e,t)=>{ej(this,h,e,"f"),ej(this,f,t,"f")}),"f"),ej(this,m,new Promise((e,t)=>{ej(this,y,e,"f"),ej(this,g,t,"f")}),"f"),eM(this,p,"f").catch(()=>{}),eM(this,m,"f").catch(()=>{}),ej(this,c,e,"f"),ej(this,P,t?.logger??console,"f")}get response(){return eM(this,x,"f")}get request_id(){return eM(this,T,"f")}async withResponse(){ej(this,k,!0,"f");let e=await eM(this,p,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new t1(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r,{logger:s}={}){let a=new t1(t,{logger:s});for(let e of t.messages)a._addMessageParam(e);return ej(a,c,{...t,stream:!0},"f"),a._run(()=>a._createMessage(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},eM(this,I,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){let s,a=r?.signal;a&&(a.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),a.addEventListener("abort",s));try{eM(this,d,"m",A).call(this);let{response:s,data:a}=await e.create({...t,stream:!0},{...r,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(s),a))eM(this,d,"m",O).call(this,e);if(a.controller.signal?.aborted)throw new eV;eM(this,d,"m",C).call(this)}finally{a&&s&&a.removeEventListener("abort",s)}}_connected(e){this.ended||(ej(this,x,e,"f"),ej(this,T,e?.headers.get("request-id"),"f"),eM(this,h,"f").call(this,e),this._emit("connect"))}get ended(){return eM(this,v,"f")}get errored(){return eM(this,b,"f")}get aborted(){return eM(this,w,"f")}abort(){this.controller.abort()}on(e,t){return(eM(this,_,"f")[e]||(eM(this,_,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=eM(this,_,"f")[e];if(!r)return this;let s=r.findIndex(e=>e.listener===t);return s>=0&&r.splice(s,1),this}once(e,t){return(eM(this,_,"f")[e]||(eM(this,_,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{ej(this,k,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){ej(this,k,!0,"f"),await eM(this,m,"f")}get currentMessage(){return eM(this,u,"f")}async finalMessage(){return await this.done(),eM(this,d,"m",S).call(this)}async finalText(){return await this.done(),eM(this,d,"m",Z).call(this)}_emit(e,...t){if(eM(this,v,"f"))return;"end"===e&&(ej(this,v,!0,"f"),eM(this,y,"f").call(this));let r=eM(this,_,"f")[e];if(r&&(eM(this,_,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eM(this,k,"f")||r?.length||Promise.reject(e),eM(this,f,"f").call(this,e),eM(this,g,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eM(this,k,"f")||r?.length||Promise.reject(e),eM(this,f,"f").call(this,e),eM(this,g,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",eM(this,d,"m",S).call(this))}async _fromReadableStream(e,t){let r,s=t?.signal;s&&(s.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),s.addEventListener("abort",r));try{eM(this,d,"m",A).call(this),this._connected(null);let t=th.fromReadableStream(e,this.controller);for await(let e of t)eM(this,d,"m",O).call(this,e);if(t.controller.signal?.aborted)throw new eV;eM(this,d,"m",C).call(this)}finally{s&&r&&s.removeEventListener("abort",r)}}[(u=new WeakMap,c=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,y=new WeakMap,g=new WeakMap,_=new WeakMap,v=new WeakMap,b=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,T=new WeakMap,P=new WeakMap,I=new WeakMap,d=new WeakSet,S=function(){if(0===this.receivedMessages.length)throw new eU("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Z=function(){if(0===this.receivedMessages.length)throw new eU("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new eU("stream ended without producing a content block with type=text");return e.join(" ")},A=function(){this.ended||ej(this,u,void 0,"f")},O=function(e){if(this.ended)return;let t=eM(this,d,"m",R).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",e.delta.citation,r.citations??[]);break;case"input_json_delta":t0(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;case"compaction_delta":"compaction"===r.type&&r.content&&this._emit("compaction",r.content);break;default:t2(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(tH(t,eM(this,c,"f"),{logger:eM(this,P,"f")}),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":ej(this,u,t,"f")}},C=function(){if(this.ended)throw new eU("stream has ended, this shouldn't happen");let e=eM(this,u,"f");if(!e)throw new eU("request ended without sending any chunks");return ej(this,u,void 0,"f"),tH(e,eM(this,c,"f"),{logger:eM(this,P,"f")})},R=function(e){let t=eM(this,u,"f");if("message_start"===e.type){if(t)throw new eU(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new eU(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,t.context_management=e.context_management,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),null!=e.usage.iterations&&(t.usage.iterations=e.usage.iterations),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let r=t.content.at(e.index);switch(e.delta.type){case"text_delta":r?.type==="text"&&(t.content[e.index]={...r,text:(r.text||"")+e.delta.text});break;case"citations_delta":r?.type==="text"&&(t.content[e.index]={...r,citations:[...r.citations??[],e.delta.citation]});break;case"input_json_delta":if(r&&t0(r)){let s=r[tQ]||"";s+=e.delta.partial_json;let a={...r};if(Object.defineProperty(a,tQ,{value:s,enumerable:!1,writable:!0}),s)try{a.input=tG(s)}catch(t){let e=new eU(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${t}. JSON: ${s}`);eM(this,I,"f").call(this,e)}t.content[e.index]=a}break;case"thinking_delta":r?.type==="thinking"&&(t.content[e.index]={...r,thinking:r.thinking+e.delta.thinking});break;case"signature_delta":r?.type==="thinking"&&(t.content[e.index]={...r,signature:e.delta.signature});break;case"compaction_delta":r?.type==="compaction"&&(t.content[e.index]={...r,content:(r.content||"")+e.delta.content});break;default:t2(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("streamEvent",r=>{let s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),this.on("error",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new th(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function t2(e){}class t9 extends Error{constructor(e){super("string"==typeof e?e:e.map(e=>"text"===e.type?e.text:`[${e.type}]`).join(" ")),this.name="ToolError",this.content=e}}let t4=`You have been working on the task described above but have not yet completed it. Write a continuation summary that will allow you (or another instance of yourself) to resume work efficiently in a future context window where the conversation history will be replaced with this summary. Your summary should be structured, concise, and actionable. Include:
1. Task Overview
The user's core request and success criteria
Any clarifications or constraints they specified
2. Current State
What has been completed so far
Files created, modified, or analyzed (with paths if relevant)
Key outputs or artifacts produced
3. Important Discoveries
Technical constraints or requirements uncovered
Decisions made and their rationale
Errors encountered and how they were resolved
What approaches were tried that didn't work (and why)
4. Next Steps
Specific actions needed to complete the task
Any blockers or open questions to resolve
Priority order if multiple steps remain
5. Context to Preserve
User preferences or style requirements
Domain-specific details that aren't obvious
Any promises made to the user
Be concise but completeerr on the side of including information that would prevent duplicate work or repeated mistakes. Write in a way that enables immediate resumption of the task.
Wrap your summary in <summary></summary> tags.`;function t6(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}class t5{constructor(e,t,r){E.add(this),this.client=e,N.set(this,!1),j.set(this,!1),M.set(this,void 0),D.set(this,void 0),$.set(this,void 0),L.set(this,void 0),U.set(this,void 0),F.set(this,0),ej(this,M,{params:{...t,messages:structuredClone(t.messages)}},"f");const s=["BetaToolRunner",...tU(t.tools,t.messages)].join(", ");ej(this,D,{...r,headers:tD([{"x-stainless-helper":s},r?.headers])},"f"),ej(this,U,t6(),"f")}async *[(N=new WeakMap,j=new WeakMap,M=new WeakMap,D=new WeakMap,$=new WeakMap,L=new WeakMap,U=new WeakMap,F=new WeakMap,E=new WeakSet,V=async function(){let e=eM(this,M,"f").params.compactionControl;if(!e||!e.enabled)return!1;let t=0;if(void 0!==eM(this,$,"f"))try{let e=await eM(this,$,"f");t=e.usage.input_tokens+(e.usage.cache_creation_input_tokens??0)+(e.usage.cache_read_input_tokens??0)+e.usage.output_tokens}catch{return!1}if(t<(e.contextTokenThreshold??1e5))return!1;let r=e.model??eM(this,M,"f").params.model,s=e.summaryPrompt??t4,a=eM(this,M,"f").params.messages;if("assistant"===a[a.length-1].role){let e=a[a.length-1];if(Array.isArray(e.content)){let t=e.content.filter(e=>"tool_use"!==e.type);0===t.length?a.pop():e.content=t}}let n=await this.client.beta.messages.create({model:r,messages:[...a,{role:"user",content:[{type:"text",text:s}]}],max_tokens:eM(this,M,"f").params.max_tokens},{headers:{"x-stainless-helper":"compaction"}});if(n.content[0]?.type!=="text")throw new eU("Expected text response for compaction");return eM(this,M,"f").params.messages=[{role:"user",content:n.content}],!0},Symbol.asyncIterator)](){var e;if(eM(this,N,"f"))throw new eU("Cannot iterate over a consumed stream");ej(this,N,!0,"f"),ej(this,j,!0,"f"),ej(this,L,void 0,"f");try{for(;;){let t;try{if(eM(this,M,"f").params.max_iterations&&eM(this,F,"f")>=eM(this,M,"f").params.max_iterations)break;ej(this,j,!1,"f"),ej(this,L,void 0,"f"),ej(this,F,(e=eM(this,F,"f"),++e),"f"),ej(this,$,void 0,"f");let{max_iterations:r,compactionControl:s,...a}=eM(this,M,"f").params;if(a.stream?(t=this.client.beta.messages.stream({...a},eM(this,D,"f")),ej(this,$,t.finalMessage(),"f"),eM(this,$,"f").catch(()=>{}),yield t):(ej(this,$,this.client.beta.messages.create({...a,stream:!1},eM(this,D,"f")),"f"),yield eM(this,$,"f")),!await eM(this,E,"m",V).call(this)){if(!eM(this,j,"f")){let{role:e,content:t}=await eM(this,$,"f");eM(this,M,"f").params.messages.push({role:e,content:t})}let e=await eM(this,E,"m",q).call(this,eM(this,M,"f").params.messages.at(-1));if(e)eM(this,M,"f").params.messages.push(e);else if(!eM(this,j,"f"))break}}finally{t&&t.abort()}}if(!eM(this,$,"f"))throw new eU("ToolRunner concluded without a message from the server");eM(this,U,"f").resolve(await eM(this,$,"f"))}catch(e){throw ej(this,N,!1,"f"),eM(this,U,"f").promise.catch(()=>{}),eM(this,U,"f").reject(e),ej(this,U,t6(),"f"),e}}setMessagesParams(e){"function"==typeof e?eM(this,M,"f").params=e(eM(this,M,"f").params):eM(this,M,"f").params=e,ej(this,j,!0,"f"),ej(this,L,void 0,"f")}async generateToolResponse(){let e=await eM(this,$,"f")??this.params.messages.at(-1);return e?eM(this,E,"m",q).call(this,e):null}done(){return eM(this,U,"f").promise}async runUntilDone(){if(!eM(this,N,"f"))for await(let e of this);return this.done()}get params(){return eM(this,M,"f").params}pushMessages(...e){this.setMessagesParams(t=>({...t,messages:[...t.messages,...e]}))}then(e,t){return this.runUntilDone().then(e,t)}}async function t3(e,t=e.messages.at(-1)){if(!t||"assistant"!==t.role||!t.content||"string"==typeof t.content)return null;let r=t.content.filter(e=>"tool_use"===e.type);return 0===r.length?null:{role:"user",content:await Promise.all(r.map(async t=>{let r=e.tools.find(e=>("name"in e?e.name:e.mcp_server_name)===t.name);if(!r||!("run"in r))return{type:"tool_result",tool_use_id:t.id,content:`Error: Tool '${t.name}' not found`,is_error:!0};try{let e=t.input;"parse"in r&&r.parse&&(e=r.parse(e));let s=await r.run(e);return{type:"tool_result",tool_use_id:t.id,content:s}}catch(e){return{type:"tool_result",tool_use_id:t.id,content:e instanceof t9?e.content:`Error: ${e instanceof Error?e.message:String(e)}`,is_error:!0}}}))}}q=async function(e){return void 0!==eM(this,L,"f")||ej(this,L,t3(eM(this,M,"f").params,e),"f"),eM(this,L,"f")};class t7{constructor(e,t){this.iterator=e,this.controller=t}async *decoder(){let e=new ta;for await(let t of this.iterator)for(let r of e.decode(t))yield JSON.parse(r);for(let t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new eU("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new eU("Attempted to iterate over a response with no body")}return new t7(e8(e.body),t)}}class t8 extends tj{create(e,t){let{betas:r,...s}=e;return this._client.post("/v1/messages/batches?beta=true",{body:s,...t,headers:tD([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tK`/v1/messages/batches/${e}?beta=true`,{...r,headers:tD([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",tk,{query:s,...t,headers:tD([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},r){let{betas:s}=t??{};return this._client.delete(tK`/v1/messages/batches/${e}?beta=true`,{...r,headers:tD([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(e,t={},r){let{betas:s}=t??{};return this._client.post(tK`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:tD([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(e,t={},r){let s=await this.retrieve(e);if(!s.results_url)throw new eU(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);let{betas:a}=t??{};return this._client.get(s.results_url,{...r,headers:tD([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>t7.fromResponse(t.response,t.controller))}}let re={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026"},rt=["claude-opus-4-6"];class rr extends tj{constructor(){super(...arguments),this.batches=new t8(this._client)}create(e,t){let r=rs(e),{betas:s,...a}=r;a.model in re&&console.warn(`The model '${a.model}' is deprecated and will reach end-of-life on ${re[a.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),a.model in rt&&a.thinking&&"enabled"===a.thinking.type&&console.warn(`Using Claude with ${a.model} and 'thinking.type=enabled' is deprecated. Use 'thinking.type=adaptive' instead which results in better model performance in our testing: https://platform.claude.com/docs/en/build-with-claude/adaptive-thinking`);let n=this._client._options.timeout;if(!a.stream&&null==n){let e=tB[a.model]??void 0;n=this._client.calculateNonstreamingTimeout(a.max_tokens,e)}let i=tF(a.tools,a.messages);return this._client.post("/v1/messages?beta=true",{body:a,timeout:n??6e5,...t,headers:tD([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},i,t?.headers]),stream:r.stream??!1})}parse(e,t){return t={...t,headers:tD([{"anthropic-beta":[...e.betas??[],"structured-outputs-2025-12-15"].toString()},t?.headers])},this.create(e,t).then(t=>tX(t,e,{logger:this._client.logger??console}))}stream(e,t){return t1.createMessage(this,e,t)}countTokens(e,t){let{betas:r,...s}=rs(e);return this._client.post("/v1/messages/count_tokens?beta=true",{body:s,...t,headers:tD([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},t?.headers])})}toolRunner(e,t){return new t5(this._client,e,t)}}function rs(e){if(!e.output_format)return e;if(e.output_config?.format)throw new eU("Both output_format and output_config.format were provided. Please use only output_config.format (output_format is deprecated).");let{output_format:t,...r}=e;return{...r,output_config:{...e.output_config,format:t}}}rr.Batches=t8,rr.BetaToolRunner=t5,rr.ToolError=t9;class ra extends tj{create(e,t={},r){let{betas:s,...a}=t??{};return this._client.post(tK`/v1/skills/${e}/versions?beta=true`,tI({body:a,...r,headers:tD([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])},this._client))}retrieve(e,t,r){let{skill_id:s,betas:a}=t;return this._client.get(tK`/v1/skills/${s}/versions/${e}?beta=true`,{...r,headers:tD([{"anthropic-beta":[...a??[],"skills-2025-10-02"].toString()},r?.headers])})}list(e,t={},r){let{betas:s,...a}=t??{};return this._client.getAPIList(tK`/v1/skills/${e}/versions?beta=true`,tx,{query:a,...r,headers:tD([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])})}delete(e,t,r){let{skill_id:s,betas:a}=t;return this._client.delete(tK`/v1/skills/${s}/versions/${e}?beta=true`,{...r,headers:tD([{"anthropic-beta":[...a??[],"skills-2025-10-02"].toString()},r?.headers])})}}class rn extends tj{constructor(){super(...arguments),this.versions=new ra(this._client)}create(e={},t){let{betas:r,...s}=e??{};return this._client.post("/v1/skills?beta=true",tI({body:s,...t,headers:tD([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},t?.headers])},this._client,!1))}retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tK`/v1/skills/${e}?beta=true`,{...r,headers:tD([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/skills?beta=true",tx,{query:s,...t,headers:tD([{"anthropic-beta":[...r??[],"skills-2025-10-02"].toString()},t?.headers])})}delete(e,t={},r){let{betas:s}=t??{};return this._client.delete(tK`/v1/skills/${e}?beta=true`,{...r,headers:tD([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},r?.headers])})}}rn.Versions=ra;class ri extends tj{constructor(){super(...arguments),this.models=new tW(this._client),this.messages=new rr(this._client),this.files=new tz(this._client),this.skills=new rn(this._client)}}ri.Models=tW,ri.Messages=rr,ri.Files=tz,ri.Skills=rn;class ro extends tj{create(e,t){let{betas:r,...s}=e;return this._client.post("/v1/complete",{body:s,timeout:this._client._options.timeout??6e5,...t,headers:tD([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}function rl(e){return e?.output_config?.format}function rd(e,t,r){let s=rl(t);return t&&"parse"in(s??{})?ru(e,t,r):{...e,content:e.content.map(e=>"text"===e.type?Object.defineProperty({...e},"parsed_output",{value:null,enumerable:!1}):e),parsed_output:null}}function ru(e,t,r){let s=null,a=e.content.map(e=>{if("text"===e.type){let r=function(e,t){let r=rl(e);if(r?.type!=="json_schema")return null;try{if("parse"in r)return r.parse(t);return JSON.parse(t)}catch(e){throw new eU(`Failed to parse structured output: ${e}`)}}(t,e.text);return null===s&&(s=r),Object.defineProperty({...e},"parsed_output",{value:r,enumerable:!1})}return e});return{...e,content:a,parsed_output:s}}let rc="__json_buf";function rp(e){return"tool_use"===e.type||"server_tool_use"===e.type}class rh{constructor(e,t){K.add(this),this.messages=[],this.receivedMessages=[],z.set(this,void 0),W.set(this,null),this.controller=new AbortController,B.set(this,void 0),J.set(this,()=>{}),H.set(this,()=>{}),X.set(this,void 0),Y.set(this,()=>{}),G.set(this,()=>{}),Q.set(this,{}),ee.set(this,!1),et.set(this,!1),er.set(this,!1),es.set(this,!1),ea.set(this,void 0),en.set(this,void 0),ei.set(this,void 0),ed.set(this,e=>{if(ej(this,et,!0,"f"),e$(e)&&(e=new eV),e instanceof eV)return ej(this,er,!0,"f"),this._emit("abort",e);if(e instanceof eU)return this._emit("error",e);if(e instanceof Error){let t=new eU(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new eU(String(e)))}),ej(this,B,new Promise((e,t)=>{ej(this,J,e,"f"),ej(this,H,t,"f")}),"f"),ej(this,X,new Promise((e,t)=>{ej(this,Y,e,"f"),ej(this,G,t,"f")}),"f"),eM(this,B,"f").catch(()=>{}),eM(this,X,"f").catch(()=>{}),ej(this,W,e,"f"),ej(this,ei,t?.logger??console,"f")}get response(){return eM(this,ea,"f")}get request_id(){return eM(this,en,"f")}async withResponse(){ej(this,es,!0,"f");let e=await eM(this,B,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new rh(null);return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r,{logger:s}={}){let a=new rh(t,{logger:s});for(let e of t.messages)a._addMessageParam(e);return ej(a,W,{...t,stream:!0},"f"),a._run(()=>a._createMessage(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),a}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},eM(this,ed,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){let s,a=r?.signal;a&&(a.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),a.addEventListener("abort",s));try{eM(this,K,"m",eu).call(this);let{response:s,data:a}=await e.create({...t,stream:!0},{...r,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(s),a))eM(this,K,"m",ec).call(this,e);if(a.controller.signal?.aborted)throw new eV;eM(this,K,"m",ep).call(this)}finally{a&&s&&a.removeEventListener("abort",s)}}_connected(e){this.ended||(ej(this,ea,e,"f"),ej(this,en,e?.headers.get("request-id"),"f"),eM(this,J,"f").call(this,e),this._emit("connect"))}get ended(){return eM(this,ee,"f")}get errored(){return eM(this,et,"f")}get aborted(){return eM(this,er,"f")}abort(){this.controller.abort()}on(e,t){return(eM(this,Q,"f")[e]||(eM(this,Q,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=eM(this,Q,"f")[e];if(!r)return this;let s=r.findIndex(e=>e.listener===t);return s>=0&&r.splice(s,1),this}once(e,t){return(eM(this,Q,"f")[e]||(eM(this,Q,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{ej(this,es,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){ej(this,es,!0,"f"),await eM(this,X,"f")}get currentMessage(){return eM(this,z,"f")}async finalMessage(){return await this.done(),eM(this,K,"m",eo).call(this)}async finalText(){return await this.done(),eM(this,K,"m",el).call(this)}_emit(e,...t){if(eM(this,ee,"f"))return;"end"===e&&(ej(this,ee,!0,"f"),eM(this,Y,"f").call(this));let r=eM(this,Q,"f")[e];if(r&&(eM(this,Q,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];eM(this,es,"f")||r?.length||Promise.reject(e),eM(this,H,"f").call(this,e),eM(this,G,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];eM(this,es,"f")||r?.length||Promise.reject(e),eM(this,H,"f").call(this,e),eM(this,G,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",eM(this,K,"m",eo).call(this))}async _fromReadableStream(e,t){let r,s=t?.signal;s&&(s.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),s.addEventListener("abort",r));try{eM(this,K,"m",eu).call(this),this._connected(null);let t=th.fromReadableStream(e,this.controller);for await(let e of t)eM(this,K,"m",ec).call(this,e);if(t.controller.signal?.aborted)throw new eV;eM(this,K,"m",ep).call(this)}finally{s&&r&&s.removeEventListener("abort",r)}}[(z=new WeakMap,W=new WeakMap,B=new WeakMap,J=new WeakMap,H=new WeakMap,X=new WeakMap,Y=new WeakMap,G=new WeakMap,Q=new WeakMap,ee=new WeakMap,et=new WeakMap,er=new WeakMap,es=new WeakMap,ea=new WeakMap,en=new WeakMap,ei=new WeakMap,ed=new WeakMap,K=new WeakSet,eo=function(){if(0===this.receivedMessages.length)throw new eU("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},el=function(){if(0===this.receivedMessages.length)throw new eU("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new eU("stream ended without producing a content block with type=text");return e.join(" ")},eu=function(){this.ended||ej(this,z,void 0,"f")},ec=function(e){if(this.ended)return;let t=eM(this,K,"m",eh).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",e.delta.citation,r.citations??[]);break;case"input_json_delta":rp(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:rf(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(rd(t,eM(this,W,"f"),{logger:eM(this,ei,"f")}),!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":ej(this,z,t,"f")}},ep=function(){if(this.ended)throw new eU("stream has ended, this shouldn't happen");let e=eM(this,z,"f");if(!e)throw new eU("request ended without sending any chunks");return ej(this,z,void 0,"f"),rd(e,eM(this,W,"f"),{logger:eM(this,ei,"f")})},eh=function(e){let t=eM(this,z,"f");if("message_start"===e.type){if(t)throw new eU(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new eU(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push({...e.content_block}),t;case"content_block_delta":{let r=t.content.at(e.index);switch(e.delta.type){case"text_delta":r?.type==="text"&&(t.content[e.index]={...r,text:(r.text||"")+e.delta.text});break;case"citations_delta":r?.type==="text"&&(t.content[e.index]={...r,citations:[...r.citations??[],e.delta.citation]});break;case"input_json_delta":if(r&&rp(r)){let s=r[rc]||"";s+=e.delta.partial_json;let a={...r};Object.defineProperty(a,rc,{value:s,enumerable:!1,writable:!0}),s&&(a.input=tG(s)),t.content[e.index]=a}break;case"thinking_delta":r?.type==="thinking"&&(t.content[e.index]={...r,thinking:r.thinking+e.delta.thinking});break;case"signature_delta":r?.type==="thinking"&&(t.content[e.index]={...r,signature:e.delta.signature});break;default:rf(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("streamEvent",r=>{let s=t.shift();s?s.resolve(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),this.on("error",e=>{for(let s of(r=!0,t))s.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new th(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function rf(e){}class rm extends tj{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(tK`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",tk,{query:e,...t})}delete(e,t){return this._client.delete(tK`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(tK`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){let r=await this.retrieve(e);if(!r.results_url)throw new eU(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...t,headers:tD([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>t7.fromResponse(t.response,t.controller))}}class ry extends tj{constructor(){super(...arguments),this.batches=new rm(this._client)}create(e,t){e.model in rg&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${rg[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),e.model in r_&&e.thinking&&"enabled"===e.thinking.type&&console.warn(`Using Claude with ${e.model} and 'thinking.type=enabled' is deprecated. Use 'thinking.type=adaptive' instead which results in better model performance in our testing: https://platform.claude.com/docs/en/build-with-claude/adaptive-thinking`);let r=this._client._options.timeout;if(!e.stream&&null==r){let t=tB[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}let s=tF(e.tools,e.messages);return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...t,headers:tD([s,t?.headers]),stream:e.stream??!1})}parse(e,t){return this.create(e,t).then(t=>ru(t,e,{logger:this._client.logger??console}))}stream(e,t){return rh.createMessage(this,e,t,{logger:this._client.logger??console})}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}let rg={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-7-sonnet-latest":"February 19th, 2026","claude-3-7-sonnet-20250219":"February 19th, 2026","claude-3-5-haiku-latest":"February 19th, 2026","claude-3-5-haiku-20241022":"February 19th, 2026"},r_=["claude-opus-4-6"];ry.Batches=rm;class rv extends tj{retrieve(e,t={},r){let{betas:s}=t??{};return this._client.get(tK`/v1/models/${e}`,{...r,headers:tD([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},r?.headers])})}list(e={},t){let{betas:r,...s}=e??{};return this._client.getAPIList("/v1/models",tk,{query:s,...t,headers:tD([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},t?.headers])})}}let rb=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class rw{constructor({baseURL:e=rb("ANTHROPIC_BASE_URL"),apiKey:t=rb("ANTHROPIC_API_KEY")??null,authToken:r=rb("ANTHROPIC_AUTH_TOKEN")??null,...s}={}){ef.add(this),ey.set(this,void 0);const a={apiKey:t,authToken:r,...s,baseURL:e||"https://api.anthropic.com"};a.dangerouslyAllowBrowser,this.baseURL=a.baseURL,this.timeout=a.timeout??em.DEFAULT_TIMEOUT,this.logger=a.logger??console;const n="warn";this.logLevel=n,this.logLevel=ti(a.logLevel,"ClientOptions.logLevel",this)??ti(rb("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??n,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??function(){if("u">typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),ej(this,ey,tt,"f"),this._options=a,this.apiKey="string"==typeof t?t:null,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.get("x-api-key")||e.get("authorization")||this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return tD([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(null!=this.apiKey)return tD([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(null!=this.authToken)return tD([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new eU(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${e4}`}defaultIdempotencyKey(){return`stainless-node-retry-${eD()}`}makeStatusError(e,t,r,s){return eF.generate(e,t,r,s)}buildURL(e,t,r){let s=!eM(this,ef,"m",eg).call(this)&&r||this.baseURL,a=new URL(eQ.test(e)?e:s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(n)&&(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new eU("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new tv(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){let s=await e,a=s.maxRetries??this.maxRetries;null==t&&(t=a),await this.prepareOptions(s);let{req:n,url:i,timeout:o}=await this.buildRequest(s,{retryCount:a-t});await this.prepareRequest(n,{url:i,options:s});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),d=void 0===r?"":`, retryOf: ${r}`,u=Date.now();if(tc(this).debug(`[${l}] sending request`,tp({retryOfRequestLogID:r,method:s.method,url:i,options:s,headers:n.headers})),s.signal?.aborted)throw new eV;let c=new AbortController,p=await this.fetchWithTimeout(i,n,o,c).catch(eL),h=Date.now();if(p instanceof globalThis.Error){let e=`retrying, ${t} attempts remaining`;if(s.signal?.aborted)throw new eV;let a=e$(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(t)return tc(this).info(`[${l}] connection ${a?"timed out":"failed"} - ${e}`),tc(this).debug(`[${l}] connection ${a?"timed out":"failed"} (${e})`,tp({retryOfRequestLogID:r,url:i,durationMs:h-u,message:p.message})),this.retryRequest(s,t,r??l);if(tc(this).info(`[${l}] connection ${a?"timed out":"failed"} - error; no more retries left`),tc(this).debug(`[${l}] connection ${a?"timed out":"failed"} (error; no more retries left)`,tp({retryOfRequestLogID:r,url:i,durationMs:h-u,message:p.message})),a)throw new eK;throw new eq({cause:p})}let f=[...p.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),m=`[${l}${d}${f}] ${n.method} ${i} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${h-u}ms`;if(!p.ok){let e=await this.shouldRetry(p);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await te(p.body),tc(this).info(`${m} - ${e}`),tc(this).debug(`[${l}] response error (${e})`,tp({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:h-u})),this.retryRequest(s,t,r??l,p.headers)}let a=e?"error; no more retries left":"error; not retryable";tc(this).info(`${m} - ${a}`);let n=await p.text().catch(e=>eL(e).message),i=e9(n),o=i?void 0:n;throw tc(this).debug(`[${l}] response error (${a})`,tp({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,message:o,durationMs:Date.now()-u})),this.makeStatusError(p.status,i,o,p.headers)}return tc(this).info(m),tc(this).debug(`[${l}] response start`,tp({retryOfRequestLogID:r,url:p.url,status:p.status,headers:p.headers,durationMs:h-u})),{response:p,options:s,controller:c,requestLogID:l,retryOfRequestLogID:r,startTime:u}}getAPIList(e,t,r){return this.requestAPIList(t,r&&"then"in r?r.then(t=>({method:"get",path:e,...t})):{method:"get",path:e,...r})}requestAPIList(e,t){return new tw(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,r,s){let{signal:a,method:n,...i}=t||{},o=this._makeAbort(s);a&&a.addEventListener("abort",o,{once:!0});let l=setTimeout(o,r),d=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||"object"==typeof i.body&&null!==i.body&&Symbol.asyncIterator in i.body,u={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...i};n&&(u.method=n.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(l)}}async shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,r,s){let a,n,i=s?.get("retry-after-ms");if(i){let e=parseFloat(i);Number.isNaN(e)||(a=e)}let o=s?.get("retry-after");if(o&&!a){let e=parseFloat(o);a=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(a&&0<=a&&a<6e4)){let r=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,r)}return await (n=a,new Promise(e=>setTimeout(e,n))),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||null!=t&&e>t)throw new eU("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:t=0}={}){let r={...e},{method:s,path:a,query:n,defaultBaseURL:i}=r,o=this.buildURL(a,n,i);"timeout"in r&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new eU(`${e} must be an integer`);if(t<0)throw new eU(`${e} must be a positive integer`)})("timeout",r.timeout),r.timeout=r.timeout??this.timeout;let{bodyHeaders:l,body:d}=this.buildBody({options:r}),u=await this.buildHeaders({options:e,method:s,bodyHeaders:l,retryCount:t});return{req:{method:s,headers:u,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:s,retryCount:a}){let n={};this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),n[this.idempotencyHeader]=e.idempotencyKey);let i=tD([n,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...t??(t=(()=>{let e="u">typeof Deno&&null!=Deno.build?"deno":"u">typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":e5(Deno.build.os),"X-Stainless-Arch":e6(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("u">typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":e5(globalThis.process.platform??"unknown"),"X-Stainless-Arch":e6(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("u"<typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let r=t.exec(navigator.userAgent);if(r){let t=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${t}.${s}.${a}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":e4,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(i),i.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=tD([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:e7(e)}:"object"==typeof e&&"application/x-www-form-urlencoded"===r.values.get("content-type")?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:eM(this,ey,"f").call(this,{body:e,headers:r})}}em=rw,ey=new WeakMap,ef=new WeakSet,eg=function(){return"https://api.anthropic.com"!==this.baseURL},rw.Anthropic=em,rw.HUMAN_PROMPT="\\n\\nHuman:",rw.AI_PROMPT="\\n\\nAssistant:",rw.DEFAULT_TIMEOUT=6e5,rw.AnthropicError=eU,rw.APIError=eF,rw.APIConnectionError=eq,rw.APIConnectionTimeoutError=eK,rw.APIUserAbortError=eV,rw.NotFoundError=eJ,rw.ConflictError=eH,rw.RateLimitError=eY,rw.BadRequestError=ez,rw.AuthenticationError=eW,rw.InternalServerError=eG,rw.PermissionDeniedError=eB,rw.UnprocessableEntityError=eX,rw.toFile=tE;class rk extends rw{constructor(){super(...arguments),this.completions=new ro(this),this.messages=new ry(this),this.models=new rv(this),this.beta=new ri(this)}}rk.Completions=ro,rk.Messages=ry,rk.Models=rv,rk.Beta=ri;var rx=e.i(60901);let rT=new rk({apiKey:process.env.ANTHROPIC_API_KEY}),rP=`You are Orbiter's AI Copilot in Outcomes mode. Orbiter is a network intelligence platform that helps people achieve goals through their professional network.

Your job: help users define a clear, specific Outcome  a goal they want to achieve through a network introduction or connection.

RESPONSE FORMAT (you must always respond with valid JSON):
Your response must be a JSON object with a "response" array. Each item is either:
- Text: { "type": "text", "text": "your message here" }
- Outcome card: { "name": "outcome_card", "templateProps": { "goal": "...", "whyItMatters": "...", "idealHelper": "...", "timeframe": "...", "contextToShare": "..." } }

FLOW:
1. If user input is clear enough  respond with a brief text acknowledgment + an outcome_card
2. If user input is vague  respond with text only, asking ONE clarifying question
3. After they confirm a card  respond with text: "Your Outcome is saved. Orbiter's agents will now scan your network for the best person to help."

OUTCOME CARD FIELDS:
- goal: Single clear sentence (e.g. "Get introduced to a talent agent at UTA who works with celebrity brand partnerships")
- whyItMatters: 1-2 sentences on the personal/professional impact
- idealHelper: Who could help  their role, company type, network position
- timeframe: When they'd ideally like this to happen
- contextToShare: Background info that would help someone make the right intro

RULES:
- Always output valid JSON  no markdown, no prose outside the JSON
- Be specific, not generic. "Meet a Series B SaaS founder in HR tech" beats "expand your network"
- One clarifying question max if needed  never a list of questions
- Keep your tone warm, efficient, and smart  like a brilliant chief of staff

EXAMPLES of good goals:
- "Get introduced to the head of partnerships at a Series B SaaS company that sells to mid-market HR teams"
- "Connect with an angel investor who has backed graph database companies at the seed stage"
- "Meet a talent agent at UTA or WME who represents celebrities doing brand deals"`;async function rS(e){let{prompt:t,threadId:r,messages:s=[]}=await e.json(),a=s.filter(e=>"user"===e.role||"assistant"===e.role).map(e=>({role:e.role,content:"assistant"===e.role?JSON.stringify({response:[{type:"text",text:e.message||""}]}):e.message||""})),n="string"==typeof t?t:t?.content||"",{stream:i,onText:o,onEnd:l,onError:d}=(0,rx.crayonStream)();return(async()=>{try{for await(let e of(await rT.messages.create({model:"claude-sonnet-4-5",max_tokens:1024,system:rP,messages:[...a,{role:"user",content:n}],stream:!0})))"content_block_delta"===e.type&&"text_delta"===e.delta.type&&o(e.delta.text);l()}catch(e){d(e)}})(),new Response(i,{headers:{"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform",Connection:"keep-alive"}})}e.s(["POST",()=>rS],22655);var rZ=e.i(22655);let rI=new e_.AppRouteRouteModule({definition:{kind:ev.RouteKind.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/projects/orbiter-copilot-demo/app/api/chat/route.ts",nextConfigOutput:"standalone",userland:rZ}),{workAsyncStorage:rA,workUnitAsyncStorage:rO,serverHooks:rC}=rI;function rR(){return(0,eb.patchFetch)({workAsyncStorage:rA,workUnitAsyncStorage:rO})}async function rE(e,t,r){rI.isDev&&(0,ew.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let s="/api/chat/route";s=s.replace(/\/index$/,"")||"/";let a=await rI.prepare(e,t,{srcPage:s,multiZoneDraftMode:!1});if(!a)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:n,params:i,nextConfig:o,parsedUrl:l,isDraftMode:d,prerenderManifest:u,routerServerContext:c,isOnDemandRevalidate:p,revalidateOnlyGenerated:h,resolvedPathname:f,clientReferenceManifest:m,serverActionsManifest:y}=a,g=(0,eT.normalizeAppPath)(s),_=!!(u.dynamicRoutes[g]||u.routes[f]),v=async()=>((null==c?void 0:c.render404)?await c.render404(e,t,l,!1):t.end("This page could not be found"),null);if(_&&!d){let e=!!u.routes[f],t=u.dynamicRoutes[g];if(t&&!1===t.fallback&&!e){if(o.experimental.adapterPath)return await v();throw new eE.NoFallbackError}}let b=null;!_||rI.isDev||d||(b="/index"===(b=f)?"/":b);let w=!0===rI.isDev||!_,k=_&&!w;y&&m&&(0,ex.setManifestsSingleton)({page:s,clientReferenceManifest:m,serverActionsManifest:y});let x=e.method||"GET",T=(0,ek.getTracer)(),P=T.getActiveScopeSpan(),S={params:i,prerenderManifest:u,renderOpts:{experimental:{authInterrupts:!!o.experimental.authInterrupts},cacheComponents:!!o.cacheComponents,supportsDynamicResponse:w,incrementalCache:(0,ew.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:o.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,s,a)=>rI.onRequestError(e,t,s,a,c)},sharedContext:{buildId:n}},Z=new eP.NodeNextRequest(e),I=new eP.NodeNextResponse(t),A=eS.NextRequestAdapter.fromNodeNextRequest(Z,(0,eS.signalFromNodeResponse)(t));try{let a=async e=>rI.handle(A,S).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=T.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==eZ.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${x} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${x} ${s}`)}),n=!!(0,ew.getRequestMeta)(e,"minimalMode"),i=async i=>{var l,f;let m=async({previousCacheEntry:o})=>{try{if(!n&&p&&h&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await a(i);e.fetchMetrics=S.renderOpts.fetchMetrics;let l=S.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=S.renderOpts.collectedTags;if(!_)return await (0,eA.sendResponse)(Z,I,s,S.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,eO.toNodeOutgoingHttpHeaders)(s.headers);d&&(t[eR.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==S.renderOpts.collectedRevalidate&&!(S.renderOpts.collectedRevalidate>=eR.INFINITE_CACHE)&&S.renderOpts.collectedRevalidate,a=void 0===S.renderOpts.collectedExpire||S.renderOpts.collectedExpire>=eR.INFINITE_CACHE?void 0:S.renderOpts.collectedExpire;return{value:{kind:eN.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==o?void 0:o.isStale)&&await rI.onRequestError(e,t,{routerKind:"App Router",routePath:s,routeType:"route",revalidateReason:(0,eI.getRevalidateReason)({isStaticGeneration:k,isOnDemandRevalidate:p})},!1,c),t}},y=await rI.handleResponse({req:e,nextConfig:o,cacheKey:b,routeKind:ev.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:u,isRoutePPREnabled:!1,isOnDemandRevalidate:p,revalidateOnlyGenerated:h,responseGenerator:m,waitUntil:r.waitUntil,isMinimalMode:n});if(!_)return null;if((null==y||null==(l=y.value)?void 0:l.kind)!==eN.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==y||null==(f=y.value)?void 0:f.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});n||t.setHeader("x-nextjs-cache",p?"REVALIDATED":y.isMiss?"MISS":y.isStale?"STALE":"HIT"),d&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,eO.fromNodeOutgoingHttpHeaders)(y.value.headers);return n&&_||g.delete(eR.NEXT_CACHE_TAGS_HEADER),!y.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,eC.getCacheControlHeader)(y.cacheControl)),await (0,eA.sendResponse)(Z,I,new Response(y.value.body,{headers:g,status:y.value.status||200})),null};P?await i(P):await T.withPropagatedContext(e.headers,()=>T.trace(eZ.BaseServerSpan.handleRequest,{spanName:`${x} ${s}`,kind:ek.SpanKind.SERVER,attributes:{"http.method":x,"http.target":e.url}},i))}catch(t){if(t instanceof eE.NoFallbackError||await rI.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,eI.getRevalidateReason)({isStaticGeneration:k,isOnDemandRevalidate:p})},!1,c),_)throw t;return await (0,eA.sendResponse)(Z,I,new Response(null,{status:500})),null}}e.s(["handler",()=>rE,"patchFetch",()=>rR,"routeModule",()=>rI,"serverHooks",()=>rC,"workAsyncStorage",()=>rA,"workUnitAsyncStorage",()=>rO],76876)}];

//# sourceMappingURL=61075_40ebb768._.js.map