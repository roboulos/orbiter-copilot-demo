/**
 * ═══════════════════════════════════════════════════════════════════════════
 * ORBITER COPILOT — GLOBAL STYLES
 * ═══════════════════════════════════════════════════════════════════════════
 * 
 * INTEGRATION NOTE: This file contains ALL custom styling for the Copilot modal.
 *                   Extract these styles for Thursday's integration into real app.
 * 
 * STYLING PHILOSOPHY: Linear-Inspired Design System
 * 
 * KEY PRINCIPLES:
 *   1. Monochromatic with purple accents (#6366f1)
 *   2. Subtle gradients and shadows
 *   3. Smooth spring animations (cubic-bezier(0.34, 1.56, 0.64, 1))
 *   4. Consistent spacing (8px, 16px, 24px, 32px, 48px)
 *   5. Text hierarchy (95% / 65% / 45% opacity)
 *   6. NO EMOJIS (Mark's requirement)
 * 
 * COLOR PALETTE:
 *   Primary Purple: #6366f1 (Base), #4f46e5 (Dark), #8b5cf6 (Violet)
 *   Backgrounds: #0a0a0f (Main), rgba(255,255,255,0.02-0.08) (Surfaces)
 *   Borders: rgba(255,255,255,0.08-0.35)
 *   Text: rgba(255,255,255,0.95-0.45)
 * 
 * ANIMATION SYSTEM:
 *   Spring: cubic-bezier(0.34, 1.56, 0.64, 1) - Bouncy, playful
 *   Smooth: cubic-bezier(0.22, 1, 0.36, 1) - Smooth slide
 *   Snap: cubic-bezier(0.4, 0, 0.2, 1) - Quick response
 * 
 * SECTIONS IN THIS FILE:
 *   1. Base Resets & Dark Mode Force
 *   2. CrayonChat Overrides (Messages, Composer, Welcome)
 *   3. Scrollbar Styling
 *   4. Card Utility Classes
 *   5. Animation Keyframes
 *   6. Button Styles
 *   7. Loading States
 *   8. Error States
 * 
 * REMOVE DURING INTEGRATION:
 *   - Any "DEMO ONLY" marked styles
 *   - Development-only utility classes
 *   - Test/debug styling
 * 
 * KEEP DURING INTEGRATION:
 *   - Color variables and palette
 *   - Animation keyframes
 *   - Component-specific overrides
 *   - Accessibility improvements
 * 
 * MARK'S REQUIREMENTS IMPLEMENTED:
 *   ✅ Linear styling throughout
 *   ✅ NO emojis (all removed)
 *   ✅ Smooth animations (spring cubic-bezier)
 *   ✅ Purple accent color
 *   ✅ Clean, professional design
 * ═══════════════════════════════════════════════════════════════════════════
 */

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 1: BASE RESETS & DARK MODE FORCE
   ═══════════════════════════════════════════════════════════════════════════
   
   WHY: Ensure consistent baseline across all browsers
        Force dark mode to prevent white flash
   
   INTEGRATION NOTE: May conflict with existing app styles.
                     Scope these to .copilot-modal container if needed.
   ═══════════════════════════════════════════════════════════════════════════ */

* { box-sizing: border-box; }

html, body {
  margin: 0;
  padding: 0;
  background: #0a0a0f;
  color: #e8e8f0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
}

/* Force light text on ALL Crayon chat message content - override any system defaults */
.crayon-chat *,
.crayon-thread *,
.crayon-message *,
[class*="crayon"] *,
[class*="thread"] *,
[class*="message"] * {
  color: #e8e8f0 !important;
}

/* Specifically target common text elements */
p, span, div, a, li, h1, h2, h3, h4, h5, h6 {
  color: #e8e8f0 !important;
}

/* Input fields should have visible text */
input, textarea {
  color: #e8e8f0 !important;
}

/* Important: Override any color-scheme that might be set */
html {
  color-scheme: dark !important;
}

body, #__next, [data-theme] {
  color: #e8e8f0 !important;
}

* {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
}

/* Additional webkit-specific overrides for Safari/Chrome on macOS */
*:not(svg):not(path):not(circle):not(rect) {
  color: #e8e8f0 !important;
  -webkit-text-fill-color: #e8e8f0 !important;
}

/* Ensure all divs inherit light color */
div, section, article, main, aside {
  color: #e8e8f0 !important;
}

/* CRITICAL: Force light text inside CrayonChat - override ALL internal styles */
.force-light-text,
.force-light-text *,
.force-light-text div,
.force-light-text span,
.force-light-text p,
.force-light-text button,
.force-light-text a,
.force-light-text h1,
.force-light-text h2,
.force-light-text h3,
.force-light-text label {
  color: #e8e8f0 !important;
  -webkit-text-fill-color: #e8e8f0 !important;
}

/* Target Crayon's internal class names directly */
.force-light-text [class*="text"],
.force-light-text [class*="label"],
.force-light-text [class*="title"],
.force-light-text [class*="description"],
.force-light-text [class*="content"],
.force-light-text [class*="message"],
.force-light-text [class*="button"] {
  color: #e8e8f0 !important;
  -webkit-text-fill-color: #e8e8f0 !important;
}

/* ══════════════════════════════════════════════════════
   KEYFRAME LIBRARY
   ══════════════════════════════════════════════════════ */

@keyframes cardEntrance {
  from { opacity: 0; transform: translateY(14px) scale(0.985); }
  to   { opacity: 1; transform: translateY(0)    scale(1);     }
}

@keyframes glowPulse {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50%      { opacity: 1;   transform: scale(1.15); }
}

@keyframes shimmer {
  0%   { background-position: -200% center; }
  100% { background-position:  200% center; }
}

@keyframes orbitSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

@keyframes dotPulse {
  0%, 100% { opacity: 1;   transform: scale(1); }
  50%      { opacity: 0.5; transform: scale(0.75); }
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes modalSlideUp {
  from { opacity: 0; transform: translate(-50%, calc(-50% + 20px)) scale(0.97); }
  to   { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@keyframes backdropFadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes forkSlideIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes arcDraw {
  from { stroke-dashoffset: 300; opacity: 0; }
  to   { stroke-dashoffset: 0;   opacity: 1; }
}

@keyframes sparkFloat {
  0%   { transform: translateY(0px) scale(1);    opacity: 1; }
  50%  { transform: translateY(-8px) scale(1.2); opacity: 0.8; }
  100% { transform: translateY(0px) scale(1);    opacity: 1; }
}

@keyframes borderGlow {
  0%, 100% { box-shadow: 0 0 12px rgba(239,68,68,0.15); }
  50%      { box-shadow: 0 0 28px rgba(239,68,68,0.40), 0 0 48px rgba(239,68,68,0.12); }
}

@keyframes borderGlowPurple {
  0%, 100% { box-shadow: 0 4px 24px rgba(139,92,246,0.07); }
  50%      { box-shadow: 0 4px 32px rgba(139,92,246,0.22), 0 0 48px rgba(139,92,246,0.08); }
}

@keyframes typing {
  0%, 80%, 100% { transform: scale(0); opacity: 0.4; }
  40%           { transform: scale(1); opacity: 1;   }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(8px); }
  to   { opacity: 1; transform: translateX(0);   }
}

@keyframes successPop {
  0%   { transform: scale(0.9); opacity: 0; }
  60%  { transform: scale(1.04); }
  100% { transform: scale(1); opacity: 1; }
}

/* ══════════════════════════════════════════════════════
   LAYOUT
   ══════════════════════════════════════════════════════ */

.crayon-shell-container {
  height: 100% !important;
  background: #0a0a0f !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  width: 100% !important;
}

/* Thread area - WIDE for full-width input */
.crayon-shell-thread {
  max-width: 95% !important;
  width: 100% !important;
  margin: 0 auto !important;
  padding: 20px 32px !important;
}

/* Thread messages container */
.crayon-shell-thread-messages {
  display: flex !important;
  flex-direction: column !important;
  gap: 4px !important;
  overflow: visible !important;
  padding-left: 12px !important;
}

/* Remove any centering from message wrappers */
.crayon-shell-thread-message {
  width: 100% !important;
  display: flex !important;
}

/* Force message bodies to not expand */
.crayon-shell-thread-message-agent__body,
.crayon-shell-thread-message-user__body {
  width: auto !important;
  max-width: 500px !important;
}

/* Any inner content containers */
.crayon-shell-thread-message-agent__content > *,
.crayon-shell-thread-message-user__content > * {
  max-width: 100% !important;
}

/* Template responses (cards, buttons, etc) */
.crayon-shell-response-template {
  max-width: 440px !important;
}

/* ══════════════════════════════════════════════════════
   WELCOME SCREEN — Premium
   ══════════════════════════════════════════════════════ */

.crayon-shell-welcome-screen__title {
  font-size: 24px !important;
  font-weight: 700 !important;
  letter-spacing: -0.025em !important;
  color: #e8e8f0 !important;
  line-height: 1.25 !important;
  background: linear-gradient(135deg, #e8e8f0 30%, #a5b4fc 100%) !important;
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
  animation: fadeUp 0.5s ease both !important;
  text-align: center !important;
  width: 100% !important;
}

.crayon-shell-welcome-screen__description {
  font-size: 13px !important;
  line-height: 1.7 !important;
  color: rgba(255,255,255,0.75) !important;
  max-width: 380px !important;
  animation: fadeUp 0.55s 0.06s ease both !important;
  text-align: center !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* ══════════════════════════════════════════════════════
   CONVERSATION STARTERS
   ══════════════════════════════════════════════════════ */

.crayon-shell-conversation-starter-item-long {
  background: rgba(255,255,255,0.025) !important;
  border: 1px solid rgba(255,255,255,0.07) !important;
  border-radius: 14px !important;
  padding: 14px 18px !important;
  transition: background-color 0.18s ease, border-color 0.18s ease, transform 0.15s ease !important;
  animation: fadeUp 0.4s ease both !important;
  color: rgba(255,255,255,0.88) !important;
}

.crayon-shell-conversation-starter-item-long,
.crayon-shell-conversation-starter-item-long *,
.crayon-shell-conversation-starter-item-long__text,
.crayon-shell-conversation-starter-item-long__icon,
.crayon-shell-conversation-starter-item-long__content {
  color: #ffffff !important;
  fill: #ffffff !important;
}

.crayon-shell-conversation-starter-item-long:nth-child(1) { animation-delay: 0.08s !important; }
.crayon-shell-conversation-starter-item-long:nth-child(2) { animation-delay: 0.14s !important; }
.crayon-shell-conversation-starter-item-long:nth-child(3) { animation-delay: 0.20s !important; }
.crayon-shell-conversation-starter-item-long:nth-child(4) { animation-delay: 0.26s !important; }

.crayon-shell-conversation-starter-item-long:hover {
  background-color: rgba(255,255,255,0.05) !important;
  border-color: rgba(255,255,255,0.12) !important;
  transform: translateY(-1px) !important;
}

.crayon-shell-conversation-starter-item-long:active {
  background-color: rgba(99, 102, 241, 0.08) !important;
  transform: translateY(0) !important;
}

.crayon-shell-conversation-starter-item-long:hover .crayon-shell-conversation-starter-item-long__arrow {
  color: rgba(99, 102, 241, 0.8) !important;
  transform: translateX(2px) !important;
  transition: transform 0.12s ease !important;
}

/* Short pill starters (leverage mode) */
.crayon-shell-conversation-starter-item-short {
  background: rgba(99,102,241,0.06) !important;
  border: 1px solid rgba(99,102,241,0.15) !important;
  border-radius: 20px !important;
  padding: 8px 16px !important;
  color: rgba(255,255,255,0.85) !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  transition: all 0.15s ease !important;
  cursor: pointer !important;
}

.crayon-shell-conversation-starter-item-short:hover {
  background: rgba(99,102,241,0.12) !important;
  border-color: rgba(99,102,241,0.25) !important;
  transform: translateY(-1px) !important;
}

.crayon-shell-conversation-starter-item-short__text {
  color: rgba(255,255,255,0.85) !important;
}

/* Welcome screen image container */
.crayon-shell-welcome-screen__image-container {
  display: flex !important;
  justify-content: center !important;
  margin-bottom: 20px !important;
  animation: iconPulseIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.1s both !important;
}

@keyframes iconPulseIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Desktop starters container within welcome screen */
.crayon-shell-welcome-screen__desktop-starters {
  width: 100% !important;
  max-width: 500px !important;
  margin: 0 auto !important;
  animation: startersSlideUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.35s both !important;
}

@keyframes startersSlideUp {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ══════════════════════════════════════════════════════
   CHAT MESSAGES — Proper alignment like iMessage
   ══════════════════════════════════════════════════════ */

/* AI Messages - LEFT aligned */
.crayon-shell-thread-message-agent {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  width: 100% !important;
  margin-bottom: 12px !important;
  padding: 0 !important;
  animation: cardEntrance 0.3s cubic-bezier(0.22,1,0.36,1) both !important;
}

.crayon-shell-thread-message-agent__avatar {
  flex-shrink: 0 !important;
  margin-top: 2px !important;
  margin-right: 10px !important;
  width: 28px !important;
  height: 28px !important;
  border-radius: 50% !important;
  border: none !important;
  box-shadow: 0 0 0 1px rgba(99,102,241,0.15), 0 2px 8px rgba(99,102,241,0.12) !important;
  overflow: hidden !important;
}

.crayon-shell-thread-message-agent__avatar img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  border-radius: 50% !important;
}

.crayon-shell-thread-message-agent__content {
  display: inline-block !important;
  max-width: 560px !important;
  width: fit-content !important;
  background: rgba(255,255,255,0.04) !important;
  border: 1px solid rgba(255,255,255,0.07) !important;
  border-radius: 18px 18px 18px 4px !important;
  padding: 12px 16px !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  font-size: 14px !important;
  line-height: 1.65 !important;
  color: rgba(255,255,255,0.92) !important;
  letter-spacing: -0.008em !important;
  overflow: visible !important;
}

/* ══════════════════════════════════════════════════════
   USER MESSAGES - RIGHT ALIGNED (like iMessage)
   ══════════════════════════════════════════════════════ */

.crayon-shell-thread-message-user {
  display: flex !important;
  justify-content: flex-end !important;
  width: 100% !important;
  margin-bottom: 12px !important;
  padding: 0 !important;
  animation: slideInRight 0.2s ease both !important;
}

.crayon-shell-thread-message-user__content {
  display: inline-block !important;
  max-width: 480px !important;
  width: fit-content !important;
  background: linear-gradient(135deg, rgba(99,102,241,0.16), rgba(139,92,246,0.10)) !important;
  color: rgba(255,255,255,0.95) !important;
  border: 1px solid rgba(99,102,241,0.22) !important;
  border-radius: 18px 18px 4px 18px !important;
  font-size: 14px !important;
  line-height: 1.65 !important;
  letter-spacing: -0.008em !important;
  padding: 12px 16px !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
}

/* ══════════════════════════════════════════════════════
   COMPOSER — Premium inline layout (input + button on same row)
   ══════════════════════════════════════════════════════ */

/* Force the welcome composer to be a horizontal flex row */
.crayon-shell-desktop-welcome-composer form {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 12px !important;
  width: 100% !important;
  justify-content: space-between !important;
}

.crayon-shell-desktop-welcome-composer {
  padding: 10px !important;
  background-color: rgba(255, 255, 255, 0.03) !important;
  border: 1px solid rgba(255,255,255,0.08) !important;
  border-radius: 18px !important;
  transition: all 0.2s ease !important;
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 !important;
  box-shadow: 0 2px 12px rgba(0,0,0,0.2) !important;
  display: flex !important;
  align-items: center !important;
  gap: 12px !important;
}

.crayon-shell-desktop-welcome-composer:focus-within {
  border-color: rgba(99,102,241,0.3) !important;
  background-color: rgba(255,255,255,0.04) !important;
  box-shadow: 0 0 0 3px rgba(99,102,241,0.06), 0 4px 20px rgba(0,0,0,0.25) !important;
}

/* Input takes up ALL remaining space - SINGLE LINE ONLY */
.crayon-shell-desktop-welcome-composer__input {
  flex: 1 1 auto !important;
  width: 100% !important;
  max-width: none !important;
  min-width: 0 !important;
  color: rgba(255,255,255,0.95) !important;
  caret-color: #8b5cf6 !important;
  height: 48px !important;
  min-height: 48px !important;
  max-height: 48px !important;
  overflow-y: hidden !important;
  overflow-x: auto !important;
  resize: none !important;
  font-size: 16px !important;
  line-height: 1.5 !important;
  background: transparent !important;
  border: none !important;
  outline: none !important;
  padding: 12px !important;
  margin: 0 !important;
  font-weight: 400 !important;
}

.crayon-shell-desktop-welcome-composer__input::-webkit-scrollbar {
  display: none !important;
}

.crayon-shell-desktop-welcome-composer__input::placeholder {
  color: rgba(255,255,255,0.5) !important;
}

/* Submit button stays right-aligned, fixed size */
.crayon-shell-desktop-welcome-composer .crayon-shell-composer-submit-button {
  flex-shrink: 0 !important;
  flex-grow: 0 !important;
  width: 44px !important;
  min-width: 44px !important;
  max-width: 44px !important;
  height: 44px !important;
  border-radius: 12px !important;
}

/* Thread composer (in-chat) — same treatment */
.crayon-shell-thread-composer__input-wrapper,
.crayon-shell-thread-composer__input-wrapper > *,
.crayon-shell-thread-composer__input-wrapper form {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 12px !important;
  width: 100% !important;
}

.crayon-shell-thread-composer__input-wrapper {
  padding: 8px 8px 8px 20px !important;
  background-color: rgba(255, 255, 255, 0.03) !important;
  width: 100% !important;
  max-width: 100% !important;
  min-height: 56px !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  border-radius: 16px !important;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease !important;
  display: flex !important;
  align-items: center !important;
}

.crayon-shell-thread-composer:focus-within .crayon-shell-thread-composer__input-wrapper {
  border-color: rgba(99,102,241,0.25) !important;
  background-color: rgba(255,255,255,0.04) !important;
  box-shadow: 0 0 0 3px rgba(99,102,241,0.06) !important;
}

.crayon-shell-thread-composer__input {
  display: block !important;
  flex: 1 1 auto !important;
  width: 100% !important;
  max-width: none !important;
  min-width: 0 !important;
  color: #e8e8f0 !important;
  caret-color: #a5b4fc !important;
  height: 44px !important;
  min-height: 44px !important;
  max-height: 44px !important;
  overflow: hidden !important;
  resize: none !important;
  font-size: 16px !important;
  line-height: 44px !important;
  background: transparent !important;
  border: none !important;
  outline: none !important;
  padding: 0 12px !important;
  margin: 0 !important;
  vertical-align: middle !important;
}

.crayon-shell-thread-composer__input::-webkit-scrollbar {
  display: none !important;
}

/* Generic textarea scrollbar hide */
[class*="composer"] textarea::-webkit-scrollbar {
  display: none !important;
}

.crayon-shell-thread-composer__input::placeholder {
  color: rgba(255,255,255,0.5) !important;
}

/* Fix the icon button in thread composer - was taking 1058px instead of 44px */
.crayon-shell-thread-composer__input-wrapper .crayon-icon-button,
.crayon-shell-thread-composer__input-wrapper .crayon-icon-button-primary,
.crayon-shell-thread-composer__input-wrapper .crayon-shell-composer-submit-button,
.crayon-shell-thread-composer__input-wrapper button {
  flex: 0 0 44px !important;
  flex-shrink: 0 !important;
  flex-grow: 0 !important;
  flex-basis: 44px !important;
  width: 44px !important;
  min-width: 44px !important;
  max-width: 44px !important;
  height: 44px !important;
  border-radius: 12px !important;
}

/* Force textarea to take remaining space - Crayon sets inline height: 0px */
.crayon-shell-thread-composer__input-wrapper .crayon-shell-thread-composer__input,
.crayon-shell-thread-composer__input-wrapper textarea {
  flex: 1 1 0% !important;
  min-width: 0 !important;
  width: auto !important;
  height: 44px !important;
  min-height: 44px !important;
}

/* ══════════════════════════════════════════════════════
   SUBMIT BUTTON — Brand gradient + hover glow
   ══════════════════════════════════════════════════════ */

.crayon-shell-composer-submit-button {
  background: linear-gradient(135deg, #6366f1, #7c3aed) !important;
  border-radius: 12px !important;
  border: none !important;
  width: 38px !important;
  height: 38px !important;
  flex-shrink: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.15s ease !important;
}

.crayon-shell-composer-submit-button:not(:disabled):hover {
  background: linear-gradient(135deg, #7c3aed, #6366f1) !important;
  transform: scale(1.04) !important;
  box-shadow: 0 4px 16px rgba(99,102,241,0.35) !important;
}

.crayon-shell-composer-submit-button:not(:disabled):active {
  transform: scale(0.96) !important;
}

.crayon-shell-composer-submit-button:disabled {
  background: rgba(255,255,255,0.06) !important;
  transform: none !important;
}

/* ══════════════════════════════════════════════════════
   AGENT TEXT MESSAGES - Force white/light text everywhere
   ══════════════════════════════════════════════════════ */

.crayon-shell-thread-message-agent__text,
.crayon-shell-thread-message-agent__content,
.crayon-shell-thread-message-agent__body,
.crayon-shell-thread-message-agent p,
.crayon-shell-thread-message-agent span,
.crayon-shell-thread-message-agent div {
  font-size: 14px !important;
  line-height: 1.7 !important;
  color: #e8e8f0 !important;
}

.crayon-shell-thread-message-user__text,
.crayon-shell-thread-message-user__content,
.crayon-shell-thread-message-user__body,
.crayon-shell-thread-message-user p,
.crayon-shell-thread-message-user span,
.crayon-shell-thread-message-user div {
  color: #ffffff !important;
}

/* Force ALL text in thread messages to be light */
[class*="thread-message"] {
  color: #e8e8f0 !important;
}

[class*="thread-message"] p,
[class*="thread-message"] span,
[class*="thread-message"] div,
[class*="thread-message"] li,
[class*="thread-message"] a {
  color: inherit !important;
}

/* Response templates / cards text */
.crayon-shell-response-template,
.crayon-shell-response-template * {
  color: #e8e8f0 !important;
}

/* ══════════════════════════════════════════════════════
   THINKING/LOADING INDICATOR — Custom typing dots
   ══════════════════════════════════════════════════════ */

.crayon-shell-thread-message-agent__loading {
  color: rgba(99,102,241,0.6) !important;
}

/* Override default loading with custom dots if possible */
[class*="loading-dots"] span,
[class*="typing"] span {
  animation: typing 1.4s infinite ease-in-out !important;
  background: rgba(99,102,241,0.7) !important;
}

/* ══════════════════════════════════════════════════════
   SCROLL AREA
   ══════════════════════════════════════════════════════ */

.crayon-shell-thread-messages-list,
[class*="thread-messages"],
[class*="messages-list"] {
  flex: 1 !important;
  min-height: 0 !important;
  overflow-y: auto !important;
  scroll-behavior: smooth !important;
  padding-bottom: 32px !important;
}

/* Desktop welcome container — flex-start + auto margins centers without clipping top */
.crayon-shell-desktop-welcome-container {
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-start !important;
  align-items: center !important;
  gap: 32px !important;
  position: relative !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  width: 100% !important;
  padding: 24px 80px !important;
  box-sizing: border-box !important;
  max-width: 1000px !important;
  margin: 0 auto !important;
}

/* Force composer to bottom AND full width */
.crayon-shell-desktop-welcome-composer-wrapper {
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;
  justify-self: stretch !important;
  align-self: end !important;
}

/* ══════════════════════════════════════════════════════
   SIDEBAR
   ══════════════════════════════════════════════════════ */

.crayon-shell-sidebar {
  background: rgba(10, 10, 15, 0.97) !important;
  border-right: 1px solid rgba(255, 255, 255, 0.05) !important;
  backdrop-filter: blur(16px) !important;
}

.crayon-shell-sidebar-thread-item {
  border-radius: 8px !important;
  color: rgba(255,255,255,0.8) !important;
  font-size: 11px !important;
  transition: background 0.12s ease, color 0.12s ease !important;
}

.crayon-shell-sidebar-thread-item:hover,
.crayon-shell-sidebar-thread-item[data-active="true"] {
  background: rgba(99, 102, 241, 0.1) !important;
  color: #a5b4fc !important;
}

.crayon-shell-new-thread-button {
  font-size: 12px !important;
  border-radius: 8px !important;
  border-color: rgba(99,102,241,0.28) !important;
  color: rgba(255,255,255,0.85) !important;
  transition: background 0.12s ease, color 0.12s ease !important;
}

.crayon-shell-new-thread-button:hover {
  background: rgba(99,102,241,0.1) !important;
  color: #a5b4fc !important;
}

/* ══════════════════════════════════════════════════════
   STANDALONE MODE — Full-width, no sidebar
   ══════════════════════════════════════════════════════ */

/* Hide sidebar — correct class name */
.crayon-shell-sidebar-container { display: none !important; }

/* Hide mobile overlay that appears when sidebar slides */
.crayon-shell-sidebar-container__overlay { display: none !important; }

/* Copilot shell in standalone — override fixed width to fill parent */
.crayon-copilot-shell-container {
  width: 100% !important;
  max-width: 100% !important;
  height: 100% !important;
  min-height: 0 !important;
  border: none !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  overflow: visible !important;
}

/* Full-width standalone shell */
[class*="standalone"] .crayon-shell-container,
[class*="copilot"] .crayon-shell-container {
  width: 100% !important;
  height: 100% !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  overflow: visible !important;
}

/* Force all internal containers to fill height — flex-start prevents top-clipping */
.crayon-shell-main,
.crayon-shell-main-content,
.crayon-shell-thread,
.crayon-shell-thread-container {
  flex: 1 !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: flex-start !important;
  width: 100% !important;
  max-width: 100% !important;
  overflow: visible !important;
}

/* CrayonChat internal panels — allow scrolling so welcome icon is reachable */
.crayon-shell-thread-chat-panel,
.crayon-shell-thread-wrapper {
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

/* Welcome screen — WIDE for full-width input */
.crayon-shell-desktop-welcome-screen {
  max-width: 95% !important;
  width: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-start !important;
  align-items: center !important;
  gap: 28px !important;
  box-sizing: border-box !important;
  text-align: center !important;
  flex: 1 !important;
  margin: 0 auto !important;
  padding: 0 32px !important;
}

/* Ensure starters don't overflow */
.crayon-shell-conversation-starters-container {
  flex-shrink: 1 !important;
  min-height: 0 !important;
  overflow-y: auto !important;
  max-height: 400px !important;
  width: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
}

/* Thread container full height */
.crayon-shell-thread-container {
  flex: 1 !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Messages column max-width */
[class*="thread-messages"] > * {
  max-width: 1200px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Composer max-width - FULL WIDTH - NUCLEAR OVERRIDE */
[class*="composer"],
[class*="welcome-composer"],
[class*="composer-wrapper"],
[class*="welcome"] [class*="composer"] {
  max-width: none !important;
  width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  box-sizing: border-box !important;
}

/* Center and constrain welcome content — flex-start so icon isn't pushed above container */
.crayon-shell-welcome-screen {
  width: 100% !important;
  max-width: 700px !important;
  margin: 0 auto !important;
  text-align: center !important;
  position: relative !important;
  padding: 32px 40px !important;
  justify-content: flex-start !important;
  animation: welcomeFadeIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) both !important;
}

.crayon-shell-welcome-screen::before {
  content: '' !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: 500px !important;
  height: 350px !important;
  background: radial-gradient(ellipse at center, rgba(99,102,241,0.04) 0%, transparent 70%) !important;
  filter: blur(100px) !important;
  pointer-events: none !important;
  z-index: 0 !important;
}

.crayon-shell-welcome-screen__header,
.crayon-shell-welcome-screen__content {
  width: 100% !important;
  text-align: center !important;
  padding: 0 !important;
  position: relative !important;
  z-index: 1 !important;
}

.crayon-shell-welcome-screen__title {
  font-size: 1.75rem !important;
  margin-bottom: 12px !important;
  font-weight: 600 !important;
  letter-spacing: -0.03em !important;
  color: rgba(255,255,255,0.95) !important;
  -webkit-text-fill-color: rgba(255,255,255,0.95) !important;
  animation: titleSlideUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.15s both !important;
}

.crayon-shell-welcome-screen__description {
  font-size: 0.95rem !important;
  color: rgba(255,255,255,0.45) !important;
  margin-bottom: 36px !important;
  line-height: 1.6 !important;
  letter-spacing: -0.01em !important;
  animation: descSlideUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.2s both !important;
}

.crayon-shell-welcome-screen__desktop-composer {
  width: 100% !important;
  max-width: 700px !important;
  margin: 0 auto !important;
  animation: composerSlideUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) 0.4s both !important;
}

/* Welcome screen animations */
@keyframes welcomeFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes titleSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes descSlideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes composerSlideUp {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* CRITICAL: Override Crayon's fixed 530px copilot shell width */
.crayon-copilot-shell-container {
  width: 100dvw !important;
  max-width: 100dvw !important;
}

/* ══════════════════════════════════════════════════════
   SCROLLBAR — Premium thin
   ══════════════════════════════════════════════════════ */

::-webkit-scrollbar          { width: 3px; height: 3px; }
::-webkit-scrollbar-track    { background: transparent; }
::-webkit-scrollbar-thumb    { background: rgba(99,102,241,0.25); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: rgba(99,102,241,0.45); }

/* ══════════════════════════════════════════════════════
   CARD UTILITY CLASSES — Applied from TSX
   ══════════════════════════════════════════════════════ */

.orbiter-card-enter {
  animation: cardEntrance 0.4s cubic-bezier(0.22,1,0.36,1) both;
}

.orbiter-btn {
  transition: opacity 0.15s ease, transform 0.12s ease, box-shadow 0.15s ease !important;
}

.orbiter-btn:hover:not(:disabled) {
  opacity: 0.88;
  transform: translateY(-1px);
}

.orbiter-btn-primary:hover:not(:disabled) {
  box-shadow: 0 4px 20px rgba(99,102,241,0.4);
  opacity: 0.92;
}

.orbiter-btn:active:not(:disabled) {
  transform: scale(0.97) !important;
}

/* Glow pulse on high-urgency cards */
.orbiter-urgent {
  animation: borderGlow 2.5s ease-in-out infinite !important;
}

/* Serendipity spark float */
.orbiter-spark {
  animation: sparkFloat 2.8s ease-in-out infinite !important;
}

.orbiter-spark-delay-1 { animation-delay: 0.4s !important; }
.orbiter-spark-delay-2 { animation-delay: 0.9s !important; }

/* Success pop */
.orbiter-success-pop {
  animation: successPop 0.35s cubic-bezier(0.22,1,0.36,1) both !important;
}

/* Shimmer loading */
.orbiter-shimmer {
  background: linear-gradient(90deg, rgba(255,255,255,0.04) 25%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.04) 75%);
  background-size: 200% auto;
  animation: shimmer 1.8s linear infinite;
}

/* ══════════════════════════════════════════════════════
   MOBILE RESPONSIVE STYLES
   ══════════════════════════════════════════════════════ */

/* Tablet and below (< 768px) */
@media (max-width: 768px) {
  .copilot-modal-container {
    width: 100vw !important;
    height: 100vh !important;
    top: 0 !important;
    left: 0 !important;
    transform: none !important;
    border-radius: 0 !important;
  }

  .copilot-modal-container > div {
    border-radius: 0 !important;
  }

  /* Make buttons touch-friendly */
  button {
    min-height: 44px;
    min-width: 44px;
  }

  /* Reduce font sizes slightly */
  body {
    font-size: 14px;
  }

  /* Stack quick action cards */
  .quick-action-grid {
    grid-template-columns: 1fr !important;
  }
}

/* Phone (< 480px) */
@media (max-width: 480px) {
  /* Further reduce padding */
  .copilot-modal-container {
    padding: 8px !important;
  }

  /* Make text more readable */
  h1 {
    font-size: 24px !important;
  }

  h2 {
    font-size: 20px !important;
  }

  h3 {
    font-size: 16px !important;
  }

  /* Touch-friendly spacing */
  .button-group button {
    padding: 14px 18px !important;
    font-size: 15px !important;
  }
}

/* Landscape phones */
@media (max-height: 500px) and (orientation: landscape) {
  .copilot-modal-container {
    height: 100vh !important;
  }

  /* Reduce welcome screen icon size */
  .welcome-icon {
    width: 48px !important;
    height: 48px !important;
    font-size: 24px !important;
  }
}

/* High DPI displays (Retina) */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Crisp borders */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* Dark mode preference (system) */
@media (prefers-color-scheme: dark) {
  /* Already dark by default, but ensure consistency */
  :root {
    color-scheme: dark;
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   SEND ICON OVERRIDE (Claude-style Up Arrow) ↑
   ═══════════════════════════════════════════════════════════════════════════
   
   Task: Change the send icon from email/paper-plane to up arrow (↑)
   Requirements: Match Claude's clean up arrow design
   Implementation: Hide SVG, replace with ::before content
   
   ═══════════════════════════════════════════════════════════════════════════ */

/* ─── Step 1: Hide all SVG icons in composer send buttons ────────────────── */
.crayon-shell-composer-submit-button svg,
.crayon-shell-composer-submit-button svg *,
.crayon-shell-desktop-welcome-composer button svg,
.crayon-shell-desktop-welcome-composer button svg *,
.crayon-shell-thread-composer__input-wrapper button svg,
.crayon-shell-thread-composer__input-wrapper button svg *,
[class*="composer-submit"] svg,
[class*="composer-submit"] svg * {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  width: 0 !important;
  height: 0 !important;
  pointer-events: none !important;
}

/* ─── Step 2: Position button container for pseudo-element ───────────────── */
.crayon-shell-composer-submit-button,
.crayon-shell-desktop-welcome-composer button,
.crayon-shell-thread-composer__input-wrapper button,
[class*="composer-submit"] {
  position: relative !important;
  overflow: visible !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* ─── Step 3: Add up arrow icon using ::before ───────────────────────────── */
.crayon-shell-composer-submit-button::before,
.crayon-shell-desktop-welcome-composer button::before,
.crayon-shell-thread-composer__input-wrapper button::before,
[class*="composer-submit"]::before {
  content: "↑" !important;
  font-size: 24px !important;
  font-weight: 800 !important;
  line-height: 1 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
  color: #ffffff !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 10 !important;
  pointer-events: none !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

/* ─── Step 4: Ensure proper button state styling ─────────────────────────── */
.crayon-shell-composer-submit-button:hover::before,
.crayon-shell-desktop-welcome-composer button:hover::before,
.crayon-shell-thread-composer__input-wrapper button:hover::before {
  color: #ffffff !important;
  opacity: 1 !important;
}

.crayon-shell-composer-submit-button:disabled::before,
.crayon-shell-desktop-welcome-composer button:disabled::before,
.crayon-shell-thread-composer__input-wrapper button:disabled::before {
  color: rgba(255, 255, 255, 0.4) !important;
}

/* ─── Interview Panel Animations ─────────────────────────────────────────── */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translate(-50%, -48%) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

/* ===== Send Button — Ensure gradient shows on all composer buttons ===== */
.crayon-shell-desktop-welcome-composer button,
.crayon-shell-thread-composer__input-wrapper button {
  background: linear-gradient(135deg, #6366f1, #7c3aed) !important;
  border: none !important;
  border-radius: 12px !important;
}

.crayon-shell-desktop-welcome-composer button:disabled,
.crayon-shell-thread-composer__input-wrapper button:disabled {
  background: rgba(255,255,255,0.06) !important;
}

/* ===== Format Plain Text Dispatch Summaries ===== */
.crayon-shell-message-content {
  white-space: pre-wrap;
  line-height: 1.6;
}

/* Make structured text more readable */
.crayon-shell-message p {
  margin-bottom: 0.75em;
}

/* Bullet points */
.crayon-shell-message-content:has(•) {
  line-height: 1.8;
}


/* ══════════════════════════════════════════════════════
   AUTO-SEND TRANSITION — Hide welcome screen during prompt injection
   ══════════════════════════════════════════════════════ */

.auto-sending .crayon-shell-desktop-welcome-wrapper,
.auto-sending .crayon-shell-desktop-welcome-composer,
.auto-sending [class*="welcome"] {
  opacity: 0 !important;
  pointer-events: none !important;
  transition: none !important;
}

@keyframes autoSendPulse {
  0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }
  40% { opacity: 1; transform: scale(1); }
}

/* ===== Fix for Empty Containers ===== */
/* Hide truly empty divs in the thread that create weird visual boxes */
.crayon-shell-thread > div:empty {
  display: none !important;
}

/* Hide containers with minimum height but no content (loading states that failed) */
.crayon-shell-thread > div[style*="min-height"]:not(:has(*)) {
  display: none !important;
}

